"use strict";var Yo=Object.defineProperty;var Xo=(t,e,n)=>e in t?Yo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var M=(t,e,n)=>(Xo(t,typeof e!="symbol"?e+"":e,n),n);const ke=require("siyuan");var Zo=Object.defineProperty,Qo=(t,e,n)=>e in t?Zo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ne=(t,e,n)=>(Qo(t,typeof e!="symbol"?e+"":e,n),n);const ei=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ti=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ni=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function oi(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){ii(t);return}return e}function ii(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ri(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return n.slice(1,-1);if(n.length<=9){const o=n.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!ni.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(ei.test(t)||ti.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,oi)}return JSON.parse(t)}catch(o){if(e.strict)throw o;return t}}const si=/#/g,ai=/&/g,li=/\//g,ci=/=/g,Jt=/\+/g,ui=/%5e/gi,fi=/%60/gi,hi=/%7c/gi,pi=/%20/gi;function di(t){return encodeURI(""+t).replace(hi,"|")}function qt(t){return di(typeof t=="string"?t:JSON.stringify(t)).replace(Jt,"%2B").replace(pi,"+").replace(si,"%23").replace(ai,"%26").replace(fi,"`").replace(ui,"^").replace(li,"%2F")}function At(t){return qt(t).replace(ci,"%3D")}function so(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function mi(t){return so(t.replace(Jt," "))}function bi(t){return so(t.replace(Jt," "))}function gi(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const o=n.match(/([^=]+)=?(.*)/)||[];if(o.length<2)continue;const i=mi(o[1]);if(i==="__proto__"||i==="constructor")continue;const r=bi(o[2]||"");e[i]===void 0?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}return e}function wi(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${At(t)}=${qt(n)}`).join("&"):`${At(t)}=${qt(e)}`:At(t)}function yi(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>wi(e,t[e])).filter(Boolean).join("&")}const _i=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,ki=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Ei=/^([/\\]\s*){2,}[^/\\]/,vi=/\/$|\/\?|\/#/,Si=/^\.?\//;function ao(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?_i.test(t):ki.test(t)||(e.acceptRelative?Ei.test(t):!1)}function Mt(t="",e){return e?vi.test(t):t.endsWith("/")}function Ti(t="",e){if(!e)return(Mt(t)?t.slice(0,-1):t)||"/";if(!Mt(t,!0))return t||"/";let n=t,o="";const i=t.indexOf("#");i>=0&&(n=t.slice(0,i),o=t.slice(i));const[r,...s]=n.split("?");return((r.endsWith("/")?r.slice(0,-1):r)||"/")+(s.length>0?`?${s.join("?")}`:"")+o}function Oi(t="",e){if(!e)return t.endsWith("/")?t:t+"/";if(Mt(t,!0))return t||"/";let n=t,o="";const i=t.indexOf("#");if(i>=0&&(n=t.slice(0,i),o=t.slice(i),!n))return o;const[r,...s]=n.split("?");return r+"/"+(s.length>0?`?${s.join("?")}`:"")+o}function Ai(t,e){if(Pi(e)||ao(t))return t;const n=Ti(e);return t.startsWith(n)?t:Bi(n,t)}function Ni(t,e){const n=co(t),o={...gi(n.search),...e};return n.search=yi(o),Ri(n)}function Pi(t){return!t||t==="/"}function Ci(t){return t&&t!=="/"}function Bi(t,...e){let n=t||"";for(const o of e.filter(i=>Ci(i)))if(n){const i=o.replace(Si,"");n=Oi(n)+i}else n=o;return n}const lo=Symbol.for("ufo:protocolRelative");function co(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,g,d=""]=n;return{protocol:g.toLowerCase(),pathname:d,href:g+d,auth:"",host:"",search:"",hash:""}}if(!ao(t,{acceptRelative:!0}))return e?co(e+t):bn(t);const[,o="",i,r=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,s="",a=""]=r.match(/([^#/?]*)(.*)?/)||[],{pathname:c,search:h,hash:l}=bn(a.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:o.toLowerCase(),auth:i?i.slice(0,Math.max(0,i.length-1)):"",host:s,pathname:c,search:h,hash:l,[lo]:!o}}function bn(t=""){const[e="",n="",o=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:o}}function Ri(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",o=t.hash||"",i=t.auth?t.auth+"@":"",r=t.host||"";return(t.protocol||t[lo]?(t.protocol||"")+"//":"")+i+r+e+n+o}class Li extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function Di(t){var e,n,o,i,r;const s=((e=t.error)==null?void 0:e.message)||((n=t.error)==null?void 0:n.toString())||"",a=((o=t.request)==null?void 0:o.method)||((i=t.options)==null?void 0:i.method)||"GET",c=((r=t.request)==null?void 0:r.url)||String(t.request)||"/",h=`[${a}] ${JSON.stringify(c)}`,l=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",g=`${h}: ${l}${s?` ${s}`:""}`,d=new Li(g,t.error?{cause:t.error}:void 0);for(const p of["request","options","response"])Object.defineProperty(d,p,{get(){return t[p]}});for(const[p,u]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(d,p,{get(){return t.response&&t.response[u]}});return d}const qi=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function gn(t="GET"){return qi.has(t.toUpperCase())}function Mi(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const ji=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Fi=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Ui(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return Fi.test(e)?"json":ji.has(e)||e.startsWith("text/")?"text":"blob"}function Ii(t,e,n=globalThis.Headers){const o={...e,...t};if(e!=null&&e.params&&t!=null&&t.params&&(o.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&t!=null&&t.query&&(o.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&t!=null&&t.headers){o.headers=new n((e==null?void 0:e.headers)||{});for(const[i,r]of new n((t==null?void 0:t.headers)||{}))o.headers.set(i,r)}return o}const xi=new Set([408,409,425,429,500,502,503,504]),zi=new Set([101,204,205,304]);function uo(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:o=globalThis.AbortController}=t;async function i(a){const c=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!c){let l;typeof a.options.retry=="number"?l=a.options.retry:l=gn(a.options.method)?0:1;const g=a.response&&a.response.status||500;if(l>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(g):xi.has(g))){const d=a.options.retryDelay||0;return d>0&&await new Promise(p=>setTimeout(p,d)),r(a.request,{...a.options,retry:l-1})}}const h=Di(a);throw Error.captureStackTrace&&Error.captureStackTrace(h,r),h}const r=async function(a,c={}){var h;const l={request:a,options:Ii(c,t.defaults,n),response:void 0,error:void 0};l.options.method=(h=l.options.method)==null?void 0:h.toUpperCase(),l.options.onRequest&&await l.options.onRequest(l),typeof l.request=="string"&&(l.options.baseURL&&(l.request=Ai(l.request,l.options.baseURL)),(l.options.query||l.options.params)&&(l.request=Ni(l.request,{...l.options.params,...l.options.query}))),l.options.body&&gn(l.options.method)&&(Mi(l.options.body)?(l.options.body=typeof l.options.body=="string"?l.options.body:JSON.stringify(l.options.body),l.options.headers=new n(l.options.headers||{}),l.options.headers.has("content-type")||l.options.headers.set("content-type","application/json"),l.options.headers.has("accept")||l.options.headers.set("accept","application/json")):("pipeTo"in l.options.body&&typeof l.options.body.pipeTo=="function"||typeof l.options.body.pipe=="function")&&("duplex"in l.options||(l.options.duplex="half")));let g;if(!l.options.signal&&l.options.timeout){const d=new o;g=setTimeout(()=>d.abort(),l.options.timeout),l.options.signal=d.signal}try{l.response=await e(l.request,l.options)}catch(d){return l.error=d,l.options.onRequestError&&await l.options.onRequestError(l),await i(l)}finally{g&&clearTimeout(g)}if(l.response.body&&!zi.has(l.response.status)&&l.options.method!=="HEAD"){const d=(l.options.parseResponse?"json":l.options.responseType)||Ui(l.response.headers.get("content-type")||"");switch(d){case"json":{const p=await l.response.text(),u=l.options.parseResponse||ri;l.response._data=u(p);break}case"stream":{l.response._data=l.response.body;break}default:l.response._data=await l.response[d]()}}return l.options.onResponse&&await l.options.onResponse(l),!l.options.ignoreResponseError&&l.response.status>=400&&l.response.status<600?(l.options.onResponseError&&await l.options.onResponseError(l),await i(l)):l.response},s=async function(a,c){return(await r(a,c))._data};return s.raw=r,s.native=(...a)=>e(...a),s.create=(a={})=>uo({...t,defaults:{...t.defaults,...a}}),s}const Yt=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Hi=Yt.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),$i=Yt.Headers,Vi=Yt.AbortController,Wi=uo({fetch:Hi,Headers:$i,AbortController:Vi});class Gi extends Error{constructor(e){super(e.statusText),ne(this,"status"),this.response=e,this.status=e.status}}class wn extends Error{constructor(e,n){super(e.msg),ne(this,"code"),ne(this,"msg"),ne(this,"data"),this.body=e,this.response=n,this.code=e.code,this.msg=e.msg,this.data=e.data}}function se(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function yn(t,e){for(var n="",o=0,i=-1,r=0,s,a=0;a<=t.length;++a){if(a<t.length)s=t.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||r===1))if(i!==a-1&&r===2){if(n.length<2||o!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){c===-1?(n="",o=0):(n=n.slice(0,c),o=n.length-1-n.lastIndexOf("/")),i=a,r=0;continue}}else if(n.length===2||n.length===1){n="",o=0,i=a,r=0;continue}}e&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),o=a-i-1;i=a,r=0}else s===46&&r!==-1?++r:r=-1}return n}function Ki(t,e){var n=e.dir||e.root,o=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+o:n+t+o:o}var je={resolve:function(){for(var t="",e=!1,n,o=arguments.length-1;o>=-1&&!e;o--){var i;o>=0?i=arguments[o]:(n===void 0&&(n=process.cwd()),i=n),se(i),i.length!==0&&(t=i+"/"+t,e=i.charCodeAt(0)===47)}return t=yn(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(se(t),t.length===0)return".";var e=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=yn(t,!e),t.length===0&&!e&&(t="."),t.length>0&&n&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return se(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];se(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":je.normalize(t)},relative:function(t,e){if(se(t),se(e),t===e||(t=je.resolve(t),e=je.resolve(e),t===e))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var o=t.length,i=o-n,r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var s=e.length,a=s-r,c=i<a?i:a,h=-1,l=0;l<=c;++l){if(l===c){if(a>c){if(e.charCodeAt(r+l)===47)return e.slice(r+l+1);if(l===0)return e.slice(r+l)}else i>c&&(t.charCodeAt(n+l)===47?h=l:l===0&&(h=0));break}var g=t.charCodeAt(n+l),d=e.charCodeAt(r+l);if(g!==d)break;g===47&&(h=l)}var p="";for(l=n+h+1;l<=o;++l)(l===o||t.charCodeAt(l)===47)&&(p.length===0?p+="..":p+="/..");return p.length>0?p+e.slice(r+h):(r+=h,e.charCodeAt(r)===47&&++r,e.slice(r))},_makeLong:function(t){return t},dirname:function(t){if(se(t),t.length===0)return".";for(var e=t.charCodeAt(0),n=e===47,o=-1,i=!0,r=t.length-1;r>=1;--r)if(e=t.charCodeAt(r),e===47){if(!i){o=r;break}}else i=!1;return o===-1?n?"/":".":n&&o===1?"//":t.slice(0,o)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');se(t);var n=0,o=-1,i=!0,r;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var s=e.length-1,a=-1;for(r=t.length-1;r>=0;--r){var c=t.charCodeAt(r);if(c===47){if(!i){n=r+1;break}}else a===-1&&(i=!1,a=r+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(o=r):(s=-1,o=a))}return n===o?o=a:o===-1&&(o=t.length),t.slice(n,o)}else{for(r=t.length-1;r>=0;--r)if(t.charCodeAt(r)===47){if(!i){n=r+1;break}}else o===-1&&(i=!1,o=r+1);return o===-1?"":t.slice(n,o)}},extname:function(t){se(t);for(var e=-1,n=0,o=-1,i=!0,r=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(a===47){if(!i){n=s+1;break}continue}o===-1&&(i=!1,o=s+1),a===46?e===-1?e=s:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||o===-1||r===0||r===1&&e===o-1&&e===n+1?"":t.slice(e,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Ki("/",t)},parse:function(t){se(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var n=t.charCodeAt(0),o=n===47,i;o?(e.root="/",i=1):i=0;for(var r=-1,s=0,a=-1,c=!0,h=t.length-1,l=0;h>=i;--h){if(n=t.charCodeAt(h),n===47){if(!c){s=h+1;break}continue}a===-1&&(c=!1,a=h+1),n===46?r===-1?r=h:l!==1&&(l=1):r!==-1&&(l=-1)}return r===-1||a===-1||l===0||l===1&&r===a-1&&r===s+1?a!==-1&&(s===0&&o?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(s,a)):(s===0&&o?(e.name=t.slice(1,r),e.base=t.slice(1,a)):(e.name=t.slice(s,r),e.base=t.slice(s,a)),e.ext=t.slice(r,a)),s>0?e.dir=t.slice(0,s-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};je.posix=je;function fo(t,e){return function(){return t.apply(e,arguments)}}const{toString:Ji}=Object.prototype,{getPrototypeOf:Xt}=Object,dt=(t=>e=>{const n=Ji.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),le=t=>(t=t.toLowerCase(),e=>dt(e)===t),mt=t=>e=>typeof e===t,{isArray:Pe}=Array,Ie=mt("undefined");function Yi(t){return t!==null&&!Ie(t)&&t.constructor!==null&&!Ie(t.constructor)&&Z(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ho=le("ArrayBuffer");function Xi(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ho(t.buffer),e}const Zi=mt("string"),Z=mt("function"),po=mt("number"),bt=t=>t!==null&&typeof t=="object",Qi=t=>t===!0||t===!1,it=t=>{if(dt(t)!=="object")return!1;const e=Xt(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},er=le("Date"),tr=le("File"),nr=le("Blob"),or=le("FileList"),ir=t=>bt(t)&&Z(t.pipe),rr=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Z(t.append)&&((e=dt(t))==="formdata"||e==="object"&&Z(t.toString)&&t.toString()==="[object FormData]"))},sr=le("URLSearchParams"),ar=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function He(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,i;if(typeof t!="object"&&(t=[t]),Pe(t))for(o=0,i=t.length;o<i;o++)e.call(null,t[o],o,t);else{const r=n?Object.getOwnPropertyNames(t):Object.keys(t),s=r.length;let a;for(o=0;o<s;o++)a=r[o],e.call(null,t[a],a,t)}}function mo(t,e){e=e.toLowerCase();const n=Object.keys(t);let o=n.length,i;for(;o-- >0;)if(i=n[o],e===i.toLowerCase())return i;return null}const bo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,go=t=>!Ie(t)&&t!==bo;function jt(){const{caseless:t}=go(this)&&this||{},e={},n=(o,i)=>{const r=t&&mo(e,i)||i;it(e[r])&&it(o)?e[r]=jt(e[r],o):it(o)?e[r]=jt({},o):Pe(o)?e[r]=o.slice():e[r]=o};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&He(arguments[o],n);return e}const lr=(t,e,n,{allOwnKeys:o}={})=>(He(e,(i,r)=>{n&&Z(i)?t[r]=fo(i,n):t[r]=i},{allOwnKeys:o}),t),cr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ur=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},fr=(t,e,n,o)=>{let i,r,s;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)s=i[r],(!o||o(s,t,e))&&!a[s]&&(e[s]=t[s],a[s]=!0);t=n!==!1&&Xt(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},hr=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},pr=t=>{if(!t)return null;if(Pe(t))return t;let e=t.length;if(!po(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},dr=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Xt(Uint8Array)),mr=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const i=o.value;e.call(t,i[0],i[1])}},br=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},gr=le("HTMLFormElement"),wr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,o){return n.toUpperCase()+o}),_n=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),yr=le("RegExp"),wo=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};He(n,(i,r)=>{let s;(s=e(i,r,t))!==!1&&(o[r]=s||i)}),Object.defineProperties(t,o)},_r=t=>{wo(t,(e,n)=>{if(Z(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(Z(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},kr=(t,e)=>{const n={},o=i=>{i.forEach(r=>{n[r]=!0})};return Pe(t)?o(t):o(String(t).split(e)),n},Er=()=>{},vr=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Nt="abcdefghijklmnopqrstuvwxyz",kn="0123456789",yo={DIGIT:kn,ALPHA:Nt,ALPHA_DIGIT:Nt+Nt.toUpperCase()+kn},Sr=(t=16,e=yo.ALPHA_DIGIT)=>{let n="";const{length:o}=e;for(;t--;)n+=e[Math.random()*o|0];return n};function Tr(t){return!!(t&&Z(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Or=t=>{const e=new Array(10),n=(o,i)=>{if(bt(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[i]=o;const r=Pe(o)?[]:{};return He(o,(s,a)=>{const c=n(s,i+1);!Ie(c)&&(r[a]=c)}),e[i]=void 0,r}}return o};return n(t,0)},Ar=le("AsyncFunction"),Nr=t=>t&&(bt(t)||Z(t))&&Z(t.then)&&Z(t.catch),w={isArray:Pe,isArrayBuffer:ho,isBuffer:Yi,isFormData:rr,isArrayBufferView:Xi,isString:Zi,isNumber:po,isBoolean:Qi,isObject:bt,isPlainObject:it,isUndefined:Ie,isDate:er,isFile:tr,isBlob:nr,isRegExp:yr,isFunction:Z,isStream:ir,isURLSearchParams:sr,isTypedArray:dr,isFileList:or,forEach:He,merge:jt,extend:lr,trim:ar,stripBOM:cr,inherits:ur,toFlatObject:fr,kindOf:dt,kindOfTest:le,endsWith:hr,toArray:pr,forEachEntry:mr,matchAll:br,isHTMLForm:gr,hasOwnProperty:_n,hasOwnProp:_n,reduceDescriptors:wo,freezeMethods:_r,toObjectSet:kr,toCamelCase:wr,noop:Er,toFiniteNumber:vr,findKey:mo,global:bo,isContextDefined:go,ALPHABET:yo,generateString:Sr,isSpecCompliantForm:Tr,toJSONObject:Or,isAsyncFn:Ar,isThenable:Nr};function P(t,e,n,o,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),i&&(this.response=i)}w.inherits(P,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const _o=P.prototype,ko={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ko[t]={value:t}});Object.defineProperties(P,ko);Object.defineProperty(_o,"isAxiosError",{value:!0});P.from=(t,e,n,o,i,r)=>{const s=Object.create(_o);return w.toFlatObject(t,s,function(a){return a!==Error.prototype},a=>a!=="isAxiosError"),P.call(s,t.message,e,n,o,i),s.cause=t,s.name=t.name,r&&Object.assign(s,r),s};const Pr=null;function Ft(t){return w.isPlainObject(t)||w.isArray(t)}function Eo(t){return w.endsWith(t,"[]")?t.slice(0,-2):t}function En(t,e,n){return t?t.concat(e).map(function(o,i){return o=Eo(o),!n&&i?"["+o+"]":o}).join(n?".":""):e}function Cr(t){return w.isArray(t)&&!t.some(Ft)}const Br=w.toFlatObject(w,{},null,function(t){return/^is[A-Z]/.test(t)});function gt(t,e,n){if(!w.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=w.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,u){return!w.isUndefined(u[p])});const o=n.metaTokens,i=n.visitor||h,r=n.dots,s=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(e);if(!w.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(w.isDate(p))return p.toISOString();if(!a&&w.isBlob(p))throw new P("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(p)||w.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,u,f){let m=p;if(p&&!f&&typeof p=="object"){if(w.endsWith(u,"{}"))u=o?u:u.slice(0,-2),p=JSON.stringify(p);else if(w.isArray(p)&&Cr(p)||(w.isFileList(p)||w.endsWith(u,"[]"))&&(m=w.toArray(p)))return u=Eo(u),m.forEach(function(_,W){!(w.isUndefined(_)||_===null)&&e.append(s===!0?En([u],W,r):s===null?u:u+"[]",c(_))}),!1}return Ft(p)?!0:(e.append(En(f,u,r),c(p)),!1)}const l=[],g=Object.assign(Br,{defaultVisitor:h,convertValue:c,isVisitable:Ft});function d(p,u){if(!w.isUndefined(p)){if(l.indexOf(p)!==-1)throw Error("Circular reference detected in "+u.join("."));l.push(p),w.forEach(p,function(f,m){(!(w.isUndefined(f)||f===null)&&i.call(e,f,w.isString(m)?m.trim():m,u,g))===!0&&d(f,u?u.concat(m):[m])}),l.pop()}}if(!w.isObject(t))throw new TypeError("data must be an object");return d(t),e}function vn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Zt(t,e){this._pairs=[],t&&gt(t,this,e)}const vo=Zt.prototype;vo.append=function(t,e){this._pairs.push([t,e])};vo.toString=function(t){const e=t?function(n){return t.call(this,n,vn)}:vn;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function Rr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function So(t,e,n){if(!e)return t;const o=n&&n.encode||Rr,i=n&&n.serialize;let r;if(i?r=i(e,n):r=w.isURLSearchParams(e)?e.toString():new Zt(e,n).toString(o),r){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Sn{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){w.forEach(this.handlers,function(n){n!==null&&e(n)})}}const To={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lr=typeof URLSearchParams<"u"?URLSearchParams:Zt,Dr=typeof FormData<"u"?FormData:null,qr=typeof Blob<"u"?Blob:null,Mr={isBrowser:!0,classes:{URLSearchParams:Lr,FormData:Dr,Blob:qr},protocols:["http","https","file","blob","url","data"]},Oo=typeof window<"u"&&typeof document<"u",jr=(t=>Oo&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Fr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ur=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Oo,hasStandardBrowserEnv:jr,hasStandardBrowserWebWorkerEnv:Fr},Symbol.toStringTag,{value:"Module"})),ae={...Ur,...Mr};function Ir(t,e){return gt(t,new ae.classes.URLSearchParams,Object.assign({visitor:function(n,o,i,r){return ae.isNode&&w.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function xr(t){return w.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zr(t){const e={},n=Object.keys(t);let o;const i=n.length;let r;for(o=0;o<i;o++)r=n[o],e[r]=t[r];return e}function Ao(t){function e(n,o,i,r){let s=n[r++];if(s==="__proto__")return!0;const a=Number.isFinite(+s),c=r>=n.length;return s=!s&&w.isArray(i)?i.length:s,c?(w.hasOwnProp(i,s)?i[s]=[i[s],o]:i[s]=o,!a):((!i[s]||!w.isObject(i[s]))&&(i[s]=[]),e(n,o,i[s],r)&&w.isArray(i[s])&&(i[s]=zr(i[s])),!a)}if(w.isFormData(t)&&w.isFunction(t.entries)){const n={};return w.forEachEntry(t,(o,i)=>{e(xr(o),i,n,0)}),n}return null}function Hr(t,e,n){if(w.isString(t))try{return(e||JSON.parse)(t),w.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const Qt={transitional:To,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,i=w.isObject(t);if(i&&w.isHTMLForm(t)&&(t=new FormData(t)),w.isFormData(t))return o?JSON.stringify(Ao(t)):t;if(w.isArrayBuffer(t)||w.isBuffer(t)||w.isStream(t)||w.isFile(t)||w.isBlob(t))return t;if(w.isArrayBufferView(t))return t.buffer;if(w.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ir(t,this.formSerializer).toString();if((r=w.isFileList(t))||n.indexOf("multipart/form-data")>-1){const s=this.env&&this.env.FormData;return gt(r?{"files[]":t}:t,s&&new s,this.formSerializer)}}return i||o?(e.setContentType("application/json",!1),Hr(t)):t}],transformResponse:[function(t){const e=this.transitional||Qt.transitional,n=e&&e.forcedJSONParsing,o=this.responseType==="json";if(t&&w.isString(t)&&(n&&!this.responseType||o)){const i=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(r){if(i)throw r.name==="SyntaxError"?P.from(r,P.ERR_BAD_RESPONSE,this,null,this.response):r}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ae.classes.FormData,Blob:ae.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};w.forEach(["delete","get","head","post","put","patch"],t=>{Qt.headers[t]={}});const en=Qt,$r=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vr=t=>{const e={};let n,o,i;return t&&t.split(`
`).forEach(function(r){i=r.indexOf(":"),n=r.substring(0,i).trim().toLowerCase(),o=r.substring(i+1).trim(),!(!n||e[n]&&$r[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},Tn=Symbol("internals");function qe(t){return t&&String(t).trim().toLowerCase()}function rt(t){return t===!1||t==null?t:w.isArray(t)?t.map(rt):String(t)}function Wr(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const Gr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Pt(t,e,n,o,i){if(w.isFunction(o))return o.call(this,e,n);if(i&&(e=n),!!w.isString(e)){if(w.isString(o))return e.indexOf(o)!==-1;if(w.isRegExp(o))return o.test(e)}}function Kr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function Jr(t,e){const n=w.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(i,r,s){return this[o].call(this,e,i,r,s)},configurable:!0})})}let wt=class{constructor(t){t&&this.set(t)}set(t,e,n){const o=this;function i(s,a,c){const h=qe(a);if(!h)throw new Error("header name must be a non-empty string");const l=w.findKey(o,h);(!l||o[l]===void 0||c===!0||c===void 0&&o[l]!==!1)&&(o[l||a]=rt(s))}const r=(s,a)=>w.forEach(s,(c,h)=>i(c,h,a));return w.isPlainObject(t)||t instanceof this.constructor?r(t,e):w.isString(t)&&(t=t.trim())&&!Gr(t)?r(Vr(t),e):t!=null&&i(e,t,n),this}get(t,e){if(t=qe(t),t){const n=w.findKey(this,t);if(n){const o=this[n];if(!e)return o;if(e===!0)return Wr(o);if(w.isFunction(e))return e.call(this,o,n);if(w.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=qe(t),t){const n=w.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||Pt(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let o=!1;function i(r){if(r=qe(r),r){const s=w.findKey(n,r);s&&(!e||Pt(n,n[s],s,e))&&(delete n[s],o=!0)}}return w.isArray(t)?t.forEach(i):i(t),o}clear(t){const e=Object.keys(this);let n=e.length,o=!1;for(;n--;){const i=e[n];(!t||Pt(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const e=this,n={};return w.forEach(this,(o,i)=>{const r=w.findKey(n,i);if(r){e[r]=rt(o),delete e[i];return}const s=t?Kr(i):String(i).trim();s!==i&&delete e[i],e[s]=rt(o),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return w.forEach(this,(n,o)=>{n!=null&&n!==!1&&(e[o]=t&&w.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(o=>n.set(o)),n}static accessor(t){const e=(this[Tn]=this[Tn]={accessors:{}}).accessors,n=this.prototype;function o(i){const r=qe(i);e[r]||(Jr(n,i),e[r]=!0)}return w.isArray(t)?t.forEach(o):o(t),this}};wt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.reduceDescriptors(wt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}});w.freezeMethods(wt);const ce=wt;function Ct(t,e){const n=this||en,o=e||n,i=ce.from(o.headers);let r=o.data;return w.forEach(t,function(s){r=s.call(n,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function No(t){return!!(t&&t.__CANCEL__)}function $e(t,e,n){P.call(this,t??"canceled",P.ERR_CANCELED,e,n),this.name="CanceledError"}w.inherits($e,P,{__CANCEL__:!0});function Yr(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new P("Request failed with status code "+n.status,[P.ERR_BAD_REQUEST,P.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Xr=ae.hasStandardBrowserEnv?{write(t,e,n,o,i,r){const s=[t+"="+encodeURIComponent(e)];w.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),w.isString(o)&&s.push("path="+o),w.isString(i)&&s.push("domain="+i),r===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Zr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Qr(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Po(t,e){return t&&!Zr(e)?Qr(t,e):e}const es=ae.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(i){let r=i;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(i){const r=w.isString(i)?o(i):i;return r.protocol===n.protocol&&r.host===n.host}}():function(){return function(){return!0}}();function ts(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ns(t,e){t=t||10;const n=new Array(t),o=new Array(t);let i=0,r=0,s;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),h=o[r];s||(s=c),n[i]=a,o[i]=c;let l=r,g=0;for(;l!==i;)g+=n[l++],l=l%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),c-s<e)return;const d=h&&c-h;return d?Math.round(g*1e3/d):void 0}}function On(t,e){let n=0;const o=ns(50,250);return i=>{const r=i.loaded,s=i.lengthComputable?i.total:void 0,a=r-n,c=o(a),h=r<=s;n=r;const l={loaded:r,total:s,progress:s?r/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&h?(s-r)/c:void 0,event:i};l[e?"download":"upload"]=!0,t(l)}}const os=typeof XMLHttpRequest<"u",is=os&&function(t){return new Promise(function(e,n){let o=t.data;const i=ce.from(t.headers).normalize();let{responseType:r,withXSRFToken:s}=t,a;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let h;if(w.isFormData(o)){if(ae.hasStandardBrowserEnv||ae.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((h=i.getContentType())!==!1){const[u,...f]=h?h.split(";").map(m=>m.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...f].join("; "))}}let l=new XMLHttpRequest;if(t.auth){const u=t.auth.username||"",f=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(u+":"+f))}const g=Po(t.baseURL,t.url);l.open(t.method.toUpperCase(),So(g,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function d(){if(!l)return;const u=ce.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),f={data:!r||r==="text"||r==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:u,config:t,request:l};Yr(function(m){e(m),c()},function(m){n(m),c()},f),l=null}if("onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(d)},l.onabort=function(){l&&(n(new P("Request aborted",P.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new P("Network Error",P.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let u=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const f=t.transitional||To;t.timeoutErrorMessage&&(u=t.timeoutErrorMessage),n(new P(u,f.clarifyTimeoutError?P.ETIMEDOUT:P.ECONNABORTED,t,l)),l=null},ae.hasStandardBrowserEnv&&(s&&w.isFunction(s)&&(s=s(t)),s||s!==!1&&es(g))){const u=t.xsrfHeaderName&&t.xsrfCookieName&&Xr.read(t.xsrfCookieName);u&&i.set(t.xsrfHeaderName,u)}o===void 0&&i.setContentType(null),"setRequestHeader"in l&&w.forEach(i.toJSON(),function(u,f){l.setRequestHeader(f,u)}),w.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),r&&r!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",On(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",On(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=u=>{l&&(n(!u||u.type?new $e(null,t,l):u),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=ts(g);if(p&&ae.protocols.indexOf(p)===-1){n(new P("Unsupported protocol "+p+":",P.ERR_BAD_REQUEST,t));return}l.send(o||null)})},Ut={http:Pr,xhr:is};w.forEach(Ut,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const An=t=>`- ${t}`,rs=t=>w.isFunction(t)||t===null||t===!1,Co={getAdapter:t=>{t=w.isArray(t)?t:[t];const{length:e}=t;let n,o;const i={};for(let r=0;r<e;r++){n=t[r];let s;if(o=n,!rs(n)&&(o=Ut[(s=String(n)).toLowerCase()],o===void 0))throw new P(`Unknown adapter '${s}'`);if(o)break;i[s||"#"+r]=o}if(!o){const r=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let s=e?r.length>1?`since :
`+r.map(An).join(`
`):" "+An(r[0]):"as no adapter specified";throw new P("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:Ut};function Bt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $e(null,t)}function Nn(t){return Bt(t),t.headers=ce.from(t.headers),t.data=Ct.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Co.getAdapter(t.adapter||en.adapter)(t).then(function(e){return Bt(t),e.data=Ct.call(t,t.transformResponse,e),e.headers=ce.from(e.headers),e},function(e){return No(e)||(Bt(t),e&&e.response&&(e.response.data=Ct.call(t,t.transformResponse,e.response),e.response.headers=ce.from(e.response.headers))),Promise.reject(e)})}const Pn=t=>t instanceof ce?{...t}:t;function ve(t,e){e=e||{};const n={};function o(h,l,g){return w.isPlainObject(h)&&w.isPlainObject(l)?w.merge.call({caseless:g},h,l):w.isPlainObject(l)?w.merge({},l):w.isArray(l)?l.slice():l}function i(h,l,g){if(w.isUndefined(l)){if(!w.isUndefined(h))return o(void 0,h,g)}else return o(h,l,g)}function r(h,l){if(!w.isUndefined(l))return o(void 0,l)}function s(h,l){if(w.isUndefined(l)){if(!w.isUndefined(h))return o(void 0,h)}else return o(void 0,l)}function a(h,l,g){if(g in e)return o(h,l);if(g in t)return o(void 0,h)}const c={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(h,l)=>i(Pn(h),Pn(l),!0)};return w.forEach(Object.keys(Object.assign({},t,e)),function(h){const l=c[h]||i,g=l(t[h],e[h],h);w.isUndefined(g)&&l!==a||(n[h]=g)}),n}const Bo="1.6.8",tn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Cn={};tn.transitional=function(t,e,n){function o(i,r){return"[Axios v"+Bo+"] Transitional option '"+i+"'"+r+(n?". "+n:"")}return(i,r,s)=>{if(t===!1)throw new P(o(r," has been removed"+(e?" in "+e:"")),P.ERR_DEPRECATED);return e&&!Cn[r]&&(Cn[r]=!0,console.warn(o(r," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(i,r,s):!0}};function ss(t,e,n){if(typeof t!="object")throw new P("options must be an object",P.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let i=o.length;for(;i-- >0;){const r=o[i],s=e[r];if(s){const a=t[r],c=a===void 0||s(a,r,t);if(c!==!0)throw new P("option "+r+" must be "+c,P.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new P("Unknown option "+r,P.ERR_BAD_OPTION)}}const It={assertOptions:ss,validators:tn},fe=It.validators;let ct=class{constructor(t){this.defaults=t,this.interceptors={request:new Sn,response:new Sn}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=ve(this.defaults,e);const{transitional:n,paramsSerializer:o,headers:i}=e;n!==void 0&&It.assertOptions(n,{silentJSONParsing:fe.transitional(fe.boolean),forcedJSONParsing:fe.transitional(fe.boolean),clarifyTimeoutError:fe.transitional(fe.boolean)},!1),o!=null&&(w.isFunction(o)?e.paramsSerializer={serialize:o}:It.assertOptions(o,{encode:fe.function,serialize:fe.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=i&&w.merge(i.common,i[e.method]);i&&w.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),e.headers=ce.concat(r,i);const s=[];let a=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(e)===!1||(a=a&&p.synchronous,s.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let h,l=0,g;if(!a){const p=[Nn.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,c),g=p.length,h=Promise.resolve(e);l<g;)h=h.then(p[l++],p[l++]);return h}g=s.length;let d=e;for(l=0;l<g;){const p=s[l++],u=s[l++];try{d=p(d)}catch(f){u.call(this,f);break}}try{h=Nn.call(this,d)}catch(p){return Promise.reject(p)}for(l=0,g=c.length;l<g;)h=h.then(c[l++],c[l++]);return h}getUri(t){t=ve(this.defaults,t);const e=Po(t.baseURL,t.url);return So(e,t.params,t.paramsSerializer)}};w.forEach(["delete","get","head","options"],function(t){ct.prototype[t]=function(e,n){return this.request(ve(n||{},{method:t,url:e,data:(n||{}).data}))}});w.forEach(["post","put","patch"],function(t){function e(n){return function(o,i,r){return this.request(ve(r||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}ct.prototype[t]=e(),ct.prototype[t+"Form"]=e(!0)});const st=ct;let as=class Ro{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const o=this;this.promise.then(i=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](i);o._listeners=null}),this.promise.then=i=>{let r;const s=new Promise(a=>{o.subscribe(a),r=a}).then(i);return s.cancel=function(){o.unsubscribe(r)},s},e(function(i,r,s){o.reason||(o.reason=new $e(i,r,s),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ro(function(n){e=n}),cancel:e}}};const ls=as;function cs(t){return function(e){return t.apply(null,e)}}function us(t){return w.isObject(t)&&t.isAxiosError===!0}const xt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xt).forEach(([t,e])=>{xt[e]=t});const fs=xt;function Lo(t){const e=new st(t),n=fo(st.prototype.request,e);return w.extend(n,st.prototype,e,{allOwnKeys:!0}),w.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return Lo(ve(t,o))},n}const I=Lo(en);I.Axios=st;I.CanceledError=$e;I.CancelToken=ls;I.isCancel=No;I.VERSION=Bo;I.toFormData=gt;I.AxiosError=P;I.Cancel=I.CanceledError;I.all=function(t){return Promise.all(t)};I.spread=cs;I.isAxiosError=us;I.mergeConfig=ve;I.AxiosHeaders=ce;I.formToJSON=t=>Ao(w.isHTMLForm(t)?new FormData(t):t);I.getAdapter=Co.getAdapter;I.HttpStatusCode=fs;I.default=I;const{Axios:al,AxiosError:ll,CanceledError:cl,isCancel:ul,CancelToken:fl,VERSION:hl,all:pl,Cancel:dl,isAxiosError:ml,spread:bl,toFormData:gl,AxiosHeaders:wl,HttpStatusCode:et,formToJSON:yl,getAdapter:_l,mergeConfig:kl}=I,yt=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const hs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Me=Array.prototype.slice.call(hs),tt=(t=>{let e={};return t.forEach((n,o)=>e[n]=o),e})(Me),ps=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,at=String.fromCharCode.bind(String),Bn=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),ds=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Do=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),ms=t=>{let e,n,o,i,r="";const s=t.length%3;for(let a=0;a<t.length;){if((n=t.charCodeAt(a++))>255||(o=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=n<<16|o<<8|i,r+=Me[e>>18&63]+Me[e>>12&63]+Me[e>>6&63]+Me[e&63]}return s?r.slice(0,s-3)+"===".substring(s):r},bs=typeof btoa=="function"?t=>btoa(t):yt?t=>Buffer.from(t,"binary").toString("base64"):ms,Rn=yt?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,o=t.length;n<o;n+=4096)e.push(at.apply(null,t.subarray(n,n+4096)));return bs(e.join(""))},gs=(t,e=!1)=>e?ds(Rn(t)):Rn(t),ws=t=>{if(t=t.replace(/\s+/g,""),!ps.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",o,i;for(let r=0;r<t.length;)e=tt[t.charAt(r++)]<<18|tt[t.charAt(r++)]<<12|(o=tt[t.charAt(r++)])<<6|(i=tt[t.charAt(r++)]),n+=o===64?at(e>>16&255):i===64?at(e>>16&255,e>>8&255):at(e>>16&255,e>>8&255,e&255);return n},ys=typeof atob=="function"?t=>atob(Do(t)):yt?t=>Buffer.from(t,"base64").toString("binary"):ws,_s=yt?t=>Bn(Buffer.from(t,"base64")):t=>Bn(ys(t).split("").map(e=>e.charCodeAt(0))),ks=t=>_s(Es(t)),Es=t=>Do(t.replace(/[-_]/g,e=>e=="-"?"+":"/"));var ye=null;typeof WebSocket<"u"?ye=WebSocket:typeof MozWebSocket<"u"?ye=MozWebSocket:typeof global<"u"?ye=global.WebSocket||global.MozWebSocket:typeof window<"u"?ye=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ye=self.WebSocket||self.MozWebSocket);const vs=ye,nt={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var Ln,Dn,qn,Mn,jn;const zt=class b{constructor(e={},n="xhr"){ne(this,"_type","xhr"),ne(this,"_baseURL",((Dn=(Ln=globalThis.top)==null?void 0:Ln.document)==null?void 0:Dn.baseURI)??((Mn=(qn=globalThis.parent)==null?void 0:qn.document)==null?void 0:Mn.baseURI)??((jn=globalThis.location)==null?void 0:jn.origin)??nt.SIYUAN_DEFAULT_BASE_URL),ne(this,"_token",nt.SIYUAN_DEFAULT_TOKEN),ne(this,"_axios",I.create({baseURL:this._baseURL,timeout:nt.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),ne(this,"_fetch",Wi.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(n),this._updateOptions(e,n)}static headers2record(e){const n={};return e.forEach((o,i)=>{n[i]=o}),n}static headers2records(e){const n=[];return e.forEach((o,i)=>{n.push({[i]:o})}),n}static headers2entries(e){const n=[];return Object.entries(e).forEach(([o,i])=>{i.forEach(r=>n.push([o,r]))}),n}static entries2record(e){const n={};for(const[o,i]of e)n[o]=i;return n}_setClientType(e){this._type=e}_updateOptions(e,n=this._type){switch(this._token=e.token??this._token,this._baseURL=e.baseURL??this._baseURL,n){case"fetch":const o=e;if(o.token){const i="Authorization",r=`Token ${e.token}`;Array.isArray(o.headers)?o.headers.push([i,r]):o.headers instanceof Headers?o.headers.set(i,r):typeof o.headers=="object"?o.headers[i]=r:o.headers={[i]:r},delete e.token}this._fetch=this._fetch.create(o);break;case"xhr":default:for(const[i,r]of Object.entries(e))switch(i){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[i]=r;break}break}this._baseURL=e.baseURL??this._baseURL}async $fetch(e,n){const o=new Request(e,n),i=await this.forwardProxy({url:o.url,method:o.method,headers:b.headers2records(o.headers),payload:gs(new Uint8Array(await o.arrayBuffer())),timeout:nt.REQUEST_TIMEOUT,contentType:"application/json",payloadEncoding:"base64",responseEncoding:"base64"});return new Response(ks(i.data.body),{status:i.data.status,statusText:i.msg,headers:new Headers(b.headers2entries(i.data.headers))})}broadcast(e,n,o){const i=(o==null?void 0:o.baseURL)??this._baseURL,r=(o==null?void 0:o.token)??this._token,s=new URLSearchParams(e);r&&s.set("token",r);const a=new URL(i);return a.protocol=a.protocol.replace(/^http/,"ws"),a.pathname=a.pathname.endsWith("/")?`${a.pathname}${b.ws.broadcast.pathname.substring(1)}`:`${a.pathname}${b.ws.broadcast.pathname}`,a.search=s.toString(),new vs(a,n)}async upload(e,n){const o=new FormData;return o.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(i=>o.append("file[]",i)),await this._request(b.api.asset.upload.pathname,b.api.asset.upload.method,o,n)}async getBlockAttrs(e,n){return await this._request(b.api.attr.getBlockAttrs.pathname,b.api.attr.getBlockAttrs.method,e,n)}async getBookmarkLabels(e){return await this._request(b.api.attr.getBookmarkLabels.pathname,b.api.attr.getBookmarkLabels.method,void 0,e)}async setBlockAttrs(e,n){return await this._request(b.api.attr.setBlockAttrs.pathname,b.api.attr.setBlockAttrs.method,e,n)}async appendBlock(e,n){return await this._request(b.api.block.appendBlock.pathname,b.api.block.appendBlock.method,e,n)}async deleteBlock(e,n){return await this._request(b.api.block.deleteBlock.pathname,b.api.block.deleteBlock.method,e,n)}async foldBlock(e,n){return await this._request(b.api.block.foldBlock.pathname,b.api.block.foldBlock.method,e,n)}async getBlockBreadcrumb(e,n){return await this._request(b.api.block.getBlockBreadcrumb.pathname,b.api.block.getBlockBreadcrumb.method,e,n)}async getBlockDOM(e,n){return await this._request(b.api.block.getBlockDOM.pathname,b.api.block.getBlockDOM.method,e,n)}async getBlockInfo(e,n){return await this._request(b.api.block.getBlockInfo.pathname,b.api.block.getBlockInfo.method,e,n)}async getBlockKramdown(e,n){return await this._request(b.api.block.getBlockKramdown.pathname,b.api.block.getBlockKramdown.method,e,n)}async getChildBlocks(e,n){return await this._request(b.api.block.getChildBlocks.pathname,b.api.block.getChildBlocks.method,e,n)}async getDocInfo(e,n){return await this._request(b.api.block.getDocInfo.pathname,b.api.block.getDocInfo.method,e,n)}async insertBlock(e,n){return await this._request(b.api.block.insertBlock.pathname,b.api.block.insertBlock.method,e,n)}async moveBlock(e,n){return await this._request(b.api.block.moveBlock.pathname,b.api.block.moveBlock.method,e,n)}async prependBlock(e,n){return await this._request(b.api.block.prependBlock.pathname,b.api.block.prependBlock.method,e,n)}async transferBlockRef(e,n){return await this._request(b.api.block.transferBlockRef.pathname,b.api.block.transferBlockRef.method,e,n)}async unfoldBlock(e,n){return await this._request(b.api.block.unfoldBlock.pathname,b.api.block.unfoldBlock.method,e,n)}async updateBlock(e,n){return await this._request(b.api.block.updateBlock.pathname,b.api.block.updateBlock.method,e,n)}async getChannelInfo(e,n){return await this._request(b.api.broadcast.getChannelInfo.pathname,b.api.broadcast.getChannelInfo.method,e,n)}async getChannels(e){return await this._request(b.api.broadcast.getChannels.pathname,b.api.broadcast.getChannels.method,void 0,e)}async postMessage(e,n){return await this._request(b.api.broadcast.postMessage.pathname,b.api.broadcast.postMessage.method,e,n)}async pandoc(e,n){return await this._request(b.api.convert.pandoc.pathname,b.api.convert.pandoc.method,e,n)}async exportResources(e,n){return await this._request(b.api.export.exportResources.pathname,b.api.export.exportResources.method,e,n)}async exportMdContent(e,n){return await this._request(b.api.export.exportMdContent.pathname,b.api.export.exportMdContent.method,e,n)}async getFile(e,n="text",o){return await this._request(b.api.file.getFile.pathname,b.api.file.getFile.method,e,o,!1,n)}async putFile(e,n){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const o=new FormData;for(const[i,r]of Object.entries(e))e.hasOwnProperty(i)&&(r instanceof Blob?o.append(i,r):o.append(i,String(r)));return await this._request(b.api.file.putFile.pathname,b.api.file.putFile.method,o,n)}async readDir(e,n){return await this._request(b.api.file.readDir.pathname,b.api.file.readDir.method,e,n)}async removeFile(e,n){return await this._request(b.api.file.removeFile.pathname,b.api.file.removeFile.method,e,n)}async renameFile(e,n){return await this._request(b.api.file.renameFile.pathname,b.api.file.renameFile.method,e,n)}async createDailyNote(e,n){return await this._request(b.api.filetree.createDailyNote.pathname,b.api.filetree.createDailyNote.method,e,n)}async createDocWithMd(e,n){return await this._request(b.api.filetree.createDocWithMd.pathname,b.api.filetree.createDocWithMd.method,e,n)}async getDoc(e,n){return await this._request(b.api.filetree.getDoc.pathname,b.api.filetree.getDoc.method,e,n)}async getHPathByID(e,n){return await this._request(b.api.filetree.getHPathByID.pathname,b.api.filetree.getHPathByID.method,e,n)}async getHPathByPath(e,n){return await this._request(b.api.filetree.getHPathByPath.pathname,b.api.filetree.getHPathByPath.method,e,n)}async getIDsByHPath(e,n){return await this._request(b.api.filetree.getIDsByHPath.pathname,b.api.filetree.getIDsByHPath.method,e,n)}async listDocsByPath(e,n){return await this._request(b.api.filetree.listDocsByPath.pathname,b.api.filetree.listDocsByPath.method,e,n)}async moveDocs(e,n){return await this._request(b.api.filetree.moveDocs.pathname,b.api.filetree.moveDocs.method,e,n)}async removeDoc(e,n){return await this._request(b.api.filetree.removeDoc.pathname,b.api.filetree.removeDoc.method,e,n)}async renameDoc(e,n){return await this._request(b.api.filetree.renameDoc.pathname,b.api.filetree.renameDoc.method,e,n)}async searchDocs(e,n){return await this._request(b.api.filetree.searchDocs.pathname,b.api.filetree.searchDocs.method,e,n)}async getDocHistoryContent(e,n){return await this._request(b.api.history.getDocHistoryContent.pathname,b.api.history.getDocHistoryContent.method,e,n)}async getHistoryItems(e,n){return await this._request(b.api.history.getHistoryItems.pathname,b.api.history.getHistoryItems.method,e,n)}async getShorthand(e,n){return await this._request(b.api.inbox.getShorthand.pathname,b.api.inbox.getShorthand.method,e,n)}async echo(e,n){if(e)switch(n??(n={type:this._type}),n==null?void 0:n.type){case"fetch":{const o={};e.headers&&(o.headers=e.headers),e.query&&(o.query=b.entries2record(e.query.entries())),n.options?Object.assign(o,n.options):n.options=o;break}case"xhr":{const o={};e.headers&&(o.headers=Array.isArray(e.headers)?b.entries2record(e.headers):e.headers instanceof Headers?b.headers2record(e.headers):e.headers),e.query&&(o.params=e.query),n.options?Object.assign(o,n.options):n.options=o;break}}return await this._request(b.api.network.echo.pathname,(e==null?void 0:e.method)??b.api.network.echo.method,e==null?void 0:e.body,n)}async forwardProxy(e,n){return await this._request(b.api.network.forwardProxy.pathname,b.api.network.forwardProxy.method,e,n)}async closeNotebook(e,n){return await this._request(b.api.notebook.closeNotebook.pathname,b.api.notebook.closeNotebook.method,e,n)}async createNotebook(e,n){return await this._request(b.api.notebook.createNotebook.pathname,b.api.notebook.createNotebook.method,e,n)}async getNotebookConf(e,n){return await this._request(b.api.notebook.getNotebookConf.pathname,b.api.notebook.getNotebookConf.method,e,n)}async lsNotebooks(e){return await this._request(b.api.notebook.lsNotebooks.pathname,b.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,n){return await this._request(b.api.notebook.openNotebook.pathname,b.api.notebook.openNotebook.method,e,n)}async removeNotebook(e,n){return await this._request(b.api.notebook.removeNotebook.pathname,b.api.notebook.removeNotebook.method,e,n)}async renameNotebook(e,n){return await this._request(b.api.notebook.renameNotebook.pathname,b.api.notebook.renameNotebook.method,e,n)}async setNotebookConf(e,n){return await this._request(b.api.notebook.setNotebookConf.pathname,b.api.notebook.setNotebookConf.method,e,n)}async pushErrMsg(e,n){return await this._request(b.api.notification.pushErrMsg.pathname,b.api.notification.pushErrMsg.method,e,n)}async pushMsg(e,n){return await this._request(b.api.notification.pushMsg.pathname,b.api.notification.pushMsg.method,e,n)}async getDocOutline(e,n){return await this._request(b.api.outline.getDocOutline.pathname,b.api.outline.getDocOutline.method,e,n)}async sql(e,n){return await this._request(b.api.query.sql.pathname,b.api.query.sql.method,e,n)}async openRepoSnapshotDoc(e,n){return await this._request(b.api.repo.openRepoSnapshotDoc.pathname,b.api.repo.openRepoSnapshotDoc.method,e,n)}async fullTextSearchBlock(e,n){return await this._request(b.api.search.fullTextSearchBlock.pathname,b.api.search.fullTextSearchBlock.method,e,n)}async getSnippet(e,n){return await this._request(b.api.snippet.getSnippet.pathname,b.api.snippet.getSnippet.method,e,n)}async setSnippet(e,n){return await this._request(b.api.snippet.setSnippet.pathname,b.api.snippet.setSnippet.method,e,n)}async flushTransaction(e){return await this._request(b.api.sqlite.flushTransaction.pathname,b.api.sqlite.flushTransaction.method,e)}async getLocalStorage(e){return await this._request(b.api.storage.getLocalStorage.pathname,b.api.storage.getLocalStorage.method,void 0,e)}async getRecentDocs(e){return await this._request(b.api.storage.getRecentDocs.pathname,b.api.storage.getRecentDocs.method,void 0,e)}async setLocalStorage(e,n){return await this._request(b.api.storage.setLocalStorage.pathname,b.api.storage.setLocalStorage.method,e,n)}async setLocalStorageVal(e,n){return await this._request(b.api.storage.setLocalStorageVal.pathname,b.api.storage.setLocalStorageVal.method,e,n)}async bootProgress(e){return await this._request(b.api.system.bootProgress.pathname,b.api.system.bootProgress.method,void 0,e)}async currentTime(e){return await this._request(b.api.system.currentTime.pathname,b.api.system.currentTime.method,void 0,e)}async exit(e,n){return await this._request(b.api.system.exit.pathname,b.api.system.exit.method,e,n)}async getConf(e){return await this._request(b.api.system.getConf.pathname,b.api.system.getConf.method,void 0,e)}async logoutAuth(e){return await this._request(b.api.system.logoutAuth.pathname,b.api.system.logoutAuth.method,void 0,e)}async version(e){return await this._request(b.api.system.version.pathname,b.api.system.version.method,void 0,e)}async render(e,n){return await this._request(b.api.template.render.pathname,b.api.template.render.method,e,n)}async renderSprig(e,n){return await this._request(b.api.template.renderSprig.pathname,b.api.template.renderSprig.method,e,n)}async _request(e,n,o,i,r=!0,s="json"){try{switch((i==null?void 0:i.type)??this._type){case"fetch":{const a=i==null?void 0:i.options;s=(()=>{switch(s){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return s}})();const c=await this._fetch(e,{method:n,body:o,responseType:s,onResponse:async h=>{switch(h.response.status){case et.Ok:switch(s){case"blob":h.response._data.contentType=h.response.headers.get("content-type");break;default:break}break;case et.Accepted:e===b.api.file.getFile.pathname&&this._parseFetchResponse(h.response._data);break;default:break}},...a});return r&&s==="json"&&typeof c=="object"?this._parseFetchResponse(c):c}case"xhr":default:{const a=i==null?void 0:i.options;s=(()=>{switch(s){case"arrayBuffer":return"arraybuffer";default:return s}})();const c=await this._axios.request({url:e,method:n,data:o,responseType:s,...a});switch(c.status){case et.Ok:if(r&&s==="json"&&typeof c.data=="object")return this._parseAxiosResponse(c);switch(s){case"blob":c.data.contentType=c.headers.getContentType();break;default:break}return c.data;case et.Accepted:return e===b.api.file.getFile.pathname?this._parseAxiosResponse(c):c.data;default:throw new Gi(c)}}}}catch(a){throw a}}_parseFetchResponse(e){if(e.code===0)return e;throw new wn(e)}_parseAxiosResponse(e){if(e.data.code===0)return e.data;throw new wn(e.data,e)}};ne(zt,"ws",{broadcast:{pathname:"/ws/broadcast"}}),ne(zt,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},foldBlock:{pathname:"/api/block/foldBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},unfoldBlock:{pathname:"/api/block/unfoldBlock",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},getChannels:{pathname:"/api/broadcast/getChannels",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDailyNote:{pathname:"/api/filetree/createDailyNote",method:"POST"},createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},getIDsByHPath:{pathname:"/api/filetree/getIDsByHPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{echo:{pathname:"/api/network/echo",method:"POST"},forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},outline:{getDocOutline:{pathname:"/api/outline/getDocOutline",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},sqlite:{flushTransaction:{pathname:"/api/sqlite/flushTransaction",method:"POST"}},storage:{getLocalStorage:{pathname:"/api/storage/getLocalStorage",method:"POST"},getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"},setLocalStorage:{pathname:"/api/storage/setLocalStorage",method:"POST"},setLocalStorageVal:{pathname:"/api/storage/setLocalStorageVal",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},exit:{pathname:"/api/system/exit",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"},logoutAuth:{pathname:"/api/system/logoutAuth",method:"POST"},version:{pathname:"/api/system/version",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let Ss=zt;function he(){}function Ts(t,e){for(const n in e)t[n]=e[n];return t}function qo(t){return t()}function Fn(){return Object.create(null)}function Y(t){t.forEach(qo)}function Mo(t){return typeof t=="function"}function Ce(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Os(t){return Object.keys(t).length===0}function Se(t,e,n,o){if(t){const i=jo(t,e,n,o);return t[0](i)}}function jo(t,e,n,o){return t[1]&&o?Ts(n.ctx.slice(),t[1](o(e))):n.ctx}function Te(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const r=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)r[a]=e.dirty[a]|i[a];return r}return e.dirty|i}return e.dirty}function Oe(t,e,n,o,i,r){if(i){const s=jo(e,n,o,r);t.p(s,i)}}function Ae(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function H(t,e){t.appendChild(e)}function D(t,e,n){t.insertBefore(e,n||null)}function R(t){t.parentNode&&t.parentNode.removeChild(t)}function j(t){return document.createElement(t)}function Ht(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ve(t){return document.createTextNode(t)}function V(){return Ve(" ")}function nn(){return Ve("")}function $(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Un(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function $t(t){return t===""?null:+t}function As(t){return Array.from(t.childNodes)}function Fo(t,e){e=""+e,t.data!==e&&(t.data=e)}function Q(t,e){t.value=e??""}function ot(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function In(t,e,n){for(let o=0;o<t.options.length;o+=1){const i=t.options[o];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ns(t){const e=t.querySelector(":checked");return e&&e.__value}function E(t,e,n){t.classList.toggle(e,!!n)}function Ps(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}class Uo{constructor(e=!1){M(this,"is_svg",!1);M(this,"e");M(this,"n");M(this,"t");M(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,o=null){this.e||(this.is_svg?this.e=Ht(n.nodeName):this.e=j(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)D(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(R)}}let xe;function Fe(t){xe=t}function Cs(){if(!xe)throw new Error("Function called outside component initialization");return xe}function Io(){const t=Cs();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=Ps(e,n,{cancelable:o});return i.slice().forEach(s=>{s.call(t,r)}),!r.defaultPrevented}return!0}}const _e=[],xn=[];let Ee=[];const zn=[],Bs=Promise.resolve();let Vt=!1;function Rs(){Vt||(Vt=!0,Bs.then(xo))}function ut(t){Ee.push(t)}const Rt=new Set;let we=0;function xo(){if(we!==0)return;const t=xe;do{try{for(;we<_e.length;){const e=_e[we];we++,Fe(e),Ls(e.$$)}}catch(e){throw _e.length=0,we=0,e}for(Fe(null),_e.length=0,we=0;xn.length;)xn.pop()();for(let e=0;e<Ee.length;e+=1){const n=Ee[e];Rt.has(n)||(Rt.add(n),n())}Ee.length=0}while(_e.length);for(;zn.length;)zn.pop()();Vt=!1,Rt.clear(),Fe(t)}function Ls(t){if(t.fragment!==null){t.update(),Y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ut)}}function Ds(t){const e=[],n=[];Ee.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),Ee=e}const lt=new Set;let me;function ft(){me={r:0,c:[],p:me}}function ht(){me.r||Y(me.c),me=me.p}function A(t,e){t&&t.i&&(lt.delete(t),t.i(e))}function C(t,e,n,o){if(t&&t.o){if(lt.has(t))return;lt.add(t),me.c.push(()=>{lt.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function pt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function qs(t,e){t.d(1),e.delete(t.key)}function Ms(t,e){C(t,1,1,()=>{e.delete(t.key)})}function zo(t,e,n,o,i,r,s,a,c,h,l,g){let d=t.length,p=r.length,u=d;const f={};for(;u--;)f[t[u].key]=u;const m=[],_=new Map,W=new Map,T=[];for(u=p;u--;){const k=g(i,r,u),J=n(k);let G=s.get(J);G?o&&T.push(()=>G.p(k,e)):(G=h(J,k),G.c()),_.set(J,m[u]=G),J in f&&W.set(J,Math.abs(u-f[J]))}const O=new Set,z=new Set;function X(k){A(k,1),k.m(a,l),s.set(k.key,k),l=k.first,p--}for(;d&&p;){const k=m[p-1],J=t[d-1],G=k.key,oe=J.key;k===J?(l=k.first,d--,p--):_.has(oe)?!s.has(G)||O.has(G)?X(k):z.has(oe)?d--:W.get(G)>W.get(oe)?(z.add(G),X(k)):(O.add(oe),d--):(c(J,s),d--)}for(;d--;){const k=t[d];_.has(k.key)||c(k,s)}for(;p;)X(m[p-1]);return Y(T),m}function x(t){t&&t.c()}function F(t,e,n){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),ut(()=>{const r=t.$$.on_mount.map(qo).filter(Mo);t.$$.on_destroy?t.$$.on_destroy.push(...r):Y(r),t.$$.on_mount=[]}),i.forEach(ut)}function U(t,e){const n=t.$$;n.fragment!==null&&(Ds(n.after_update),Y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function js(t,e){t.$$.dirty[0]===-1&&(_e.push(t),Rs(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Be(t,e,n,o,i,r,s=null,a=[-1]){const c=xe;Fe(t);const h=t.$$={fragment:null,ctx:[],props:r,update:he,not_equal:i,bound:Fn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Fn(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};s&&s(h.root);let l=!1;if(h.ctx=n?n(t,e.props||{},(g,d,...p)=>{const u=p.length?p[0]:d;return h.ctx&&i(h.ctx[g],h.ctx[g]=u)&&(!h.skip_bound&&h.bound[g]&&h.bound[g](u),l&&js(t,g)),d}):[],h.update(),l=!0,Y(h.before_update),h.fragment=o?o(h.ctx):!1,e.target){if(e.hydrate){const g=As(e.target);h.fragment&&h.fragment.l(g),g.forEach(R)}else h.fragment&&h.fragment.c();e.intro&&A(t.$$.fragment),F(t,e.target,e.anchor),xo()}Fe(c)}class Re{constructor(){M(this,"$$");M(this,"$$set")}$destroy(){U(this,1),this.$destroy=he}$on(e,n){if(!Mo(n))return he;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!Os(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Fs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fs);const Wt={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function Us(t){let e,n;return{c(){e=Ht("svg"),n=Ht("use"),Un(n,"xlink:href",t[0]),y(e,"style",t[3]),y(e,"data-id",t[1]),y(e,"class",t[2]),E(e,"popover__block",Wt.id.test(t[1]))},m(o,i){D(o,e,i),H(e,n)},p(o,[i]){i&1&&Un(n,"xlink:href",o[0]),i&8&&y(e,"style",o[3]),i&2&&y(e,"data-id",o[1]),i&4&&y(e,"class",o[2]),i&6&&E(e,"popover__block",Wt.id.test(o[1]))},i:he,o:he,d(o){o&&R(e)}}}function Is(t,e,n){let{icon:o}=e,{id:i=""}=e,{className:r=""}=e,{style:s=""}=e;return t.$$set=a=>{"icon"in a&&n(0,o=a.icon),"id"in a&&n(1,i=a.id),"className"in a&&n(2,r=a.className),"style"in a&&n(3,s=a.style)},[o,i,r,s]}class Ho extends Re{constructor(e){super(),Be(this,e,Is,Us,Ce,{icon:0,id:1,className:2,style:3})}}const xs=t=>({focus:t&1}),Hn=t=>({focus:t[0]});function $n(t,e,n){const o=t.slice();return o[13]=e[n],o}function Vn(t){let e,n,o,i,r,s,a;return n=new Ho({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=j("div"),x(n.$$.fragment),o=V(),i=j("input"),y(i,"placeholder",t[4]),y(i,"class","b3-text-field fn__block b3-form__icon-input"),y(e,"class","b3-form__icon")},m(c,h){D(c,e,h),F(n,e,null),H(e,o),H(e,i),Q(i,t[1]),r=!0,s||(a=[$(i,"input",t[9]),$(i,"change",t[5])],s=!0)},p(c,h){(!r||h&16)&&y(i,"placeholder",c[4]),h&2&&i.value!==c[1]&&Q(i,c[1])},i(c){r||(A(n.$$.fragment,c),r=!0)},o(c){C(n.$$.fragment,c),r=!1},d(c){c&&R(e),U(n),s=!1,Y(a)}}}function Wn(t,e){let n,o,i,r,s=e[13].text+"",a,c,h,l,g;o=new Ho({props:{icon:e[13].icon,className:"b3-list-item__graphic"}});function d(){return e[10](e[13])}function p(){return e[11](e[13])}return{key:t,first:null,c(){n=j("li"),x(o.$$.fragment),i=V(),r=j("span"),a=V(),y(r,"class","b3-list-item__text svelte-15drd7h"),y(n,"role","button"),y(n,"data-name",c=e[13].name),y(n,"class","b3-list-item"),E(n,"b3-list-item--focus",e[13].key===e[0]),this.first=n},m(u,f){D(u,n,f),F(o,n,null),H(n,i),H(n,r),r.innerHTML=s,H(n,a),h=!0,l||(g=[$(n,"click",d),$(n,"keyup",p)],l=!0)},p(u,f){e=u;const m={};f&4&&(m.icon=e[13].icon),o.$set(m),(!h||f&4)&&s!==(s=e[13].text+"")&&(r.innerHTML=s),(!h||f&4&&c!==(c=e[13].name))&&y(n,"data-name",c),(!h||f&5)&&E(n,"b3-list-item--focus",e[13].key===e[0])},i(u){h||(A(o.$$.fragment,u),h=!0)},o(u){C(o.$$.fragment,u),h=!1},d(u){u&&R(n),U(o),l=!1,Y(g)}}}function zs(t){let e;return{c(){e=Ve("Container")},m(n,o){D(n,e,o)},d(n){n&&R(e)}}}function Hs(t){let e,n,o,i=[],r=new Map,s,a,c,h=t[3]&&Vn(t),l=pt(t[2]);const g=f=>f[13].key;for(let f=0;f<l.length;f+=1){let m=$n(t,l,f),_=g(m);r.set(_,i[f]=Wn(_,m))}const d=t[8].default,p=Se(d,t,t[7],Hn),u=p||zs();return{c(){e=j("div"),n=j("ul"),h&&h.c(),o=V();for(let f=0;f<i.length;f+=1)i[f].c();s=V(),a=j("div"),u&&u.c(),y(n,"class","b3-tab-bar b3-list b3-list--background"),y(a,"class","config__tab-wrap"),y(e,"class","fn__flex-1 fn__flex config__panel")},m(f,m){D(f,e,m),H(e,n),h&&h.m(n,null),H(n,o);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(n,null);H(e,s),H(e,a),u&&u.m(a,null),c=!0},p(f,[m]){f[3]?h?(h.p(f,m),m&8&&A(h,1)):(h=Vn(f),h.c(),A(h,1),h.m(n,o)):h&&(ft(),C(h,1,1,()=>{h=null}),ht()),m&69&&(l=pt(f[2]),ft(),i=zo(i,m,g,1,f,l,r,n,Ms,Wn,null,$n),ht()),p&&p.p&&(!c||m&129)&&Oe(p,d,f,f[7],c?Te(d,f[7],m,xs):Ae(f[7]),Hn)},i(f){if(!c){A(h);for(let m=0;m<l.length;m+=1)A(i[m]);A(u,f),c=!0}},o(f){C(h);for(let m=0;m<i.length;m+=1)C(i[m]);C(u,f),c=!1},d(f){f&&R(e),h&&h.d();for(let m=0;m<i.length;m+=1)i[m].d();u&&u.d(f)}}}function $s(t,e,n){let{$$slots:o={},$$scope:i}=e,{panels:r}=e,{focus:s}=e,{searchEnable:a=!1}=e,{searchPlaceholder:c=""}=e,{searchValue:h=""}=e;const l=Io();function g(){l("search-changed",{value:h})}function d(m){l("changed",{key:m}),n(0,s=m)}function p(){h=this.value,n(1,h)}const u=m=>d(m.key),f=m=>d(m.key);return t.$$set=m=>{"panels"in m&&n(2,r=m.panels),"focus"in m&&n(0,s=m.focus),"searchEnable"in m&&n(3,a=m.searchEnable),"searchPlaceholder"in m&&n(4,c=m.searchPlaceholder),"searchValue"in m&&n(1,h=m.searchValue),"$$scope"in m&&n(7,i=m.$$scope)},[s,h,r,a,c,g,d,i,o,p,u,f]}class Vs extends Re{constructor(e){super(),Be(this,e,$s,Hs,Ce,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function Ws(t){let e,n;const o=t[4].default,i=Se(o,t,t[3],null);return{c(){e=j("div"),i&&i.c(),y(e,"data-name",t[2]),y(e,"class","config__tab-container"),E(e,"fn__none",!t[0]),E(e,"config__tab-container--top",t[1])},m(r,s){D(r,e,s),i&&i.m(e,null),n=!0},p(r,[s]){i&&i.p&&(!n||s&8)&&Oe(i,o,r,r[3],n?Te(o,r[3],s,null):Ae(r[3]),null),(!n||s&4)&&y(e,"data-name",r[2]),(!n||s&1)&&E(e,"fn__none",!r[0]),(!n||s&2)&&E(e,"config__tab-container--top",r[1])},i(r){n||(A(i,r),n=!0)},o(r){C(i,r),n=!1},d(r){r&&R(e),i&&i.d(r)}}}function Gs(t,e,n){let{$$slots:o={},$$scope:i}=e,{display:r=!0}=e,{top:s=!1}=e,{name:a=""}=e;return t.$$set=c=>{"display"in c&&n(0,r=c.display),"top"in c&&n(1,s=c.top),"name"in c&&n(2,a=c.name),"$$scope"in c&&n(3,i=c.$$scope)},[r,s,a,i,o]}class Lt extends Re{constructor(e){super(),Be(this,e,Gs,Ws,Ce,{display:0,top:1,name:2})}}const Ks=t=>({}),Gn=t=>({}),Js=t=>({}),Kn=t=>({}),Ys=t=>({}),Jn=t=>({}),Xs=t=>({}),Yn=t=>({});function Zs(t){let e,n;return{c(){e=new Uo(!1),n=nn(),e.a=n},m(o,i){e.m(t[0],o,i),D(o,n,i)},p(o,i){i&1&&e.p(o[0])},d(o){o&&(R(n),e.d())}}}function Qs(t){let e,n;return{c(){e=new Uo(!1),n=nn(),e.a=n},m(o,i){e.m(t[1],o,i),D(o,n,i)},p(o,i){i&2&&e.p(o[1])},d(o){o&&(R(n),e.d())}}}function Xn(t){let e,n,o;const i=t[4].input,r=Se(i,t,t[3],Kn);return{c(){e=j("div"),n=V(),r&&r.c(),y(e,"class","fn__hr")},m(s,a){D(s,e,a),D(s,n,a),r&&r.m(s,a),o=!0},p(s,a){r&&r.p&&(!o||a&8)&&Oe(r,i,s,s[3],o?Te(i,s[3],a,Js):Ae(s[3]),Kn)},i(s){o||(A(r,s),o=!0)},o(s){C(r,s),o=!1},d(s){s&&(R(e),R(n)),r&&r.d(s)}}}function Zn(t){let e,n,o;const i=t[4].input,r=Se(i,t,t[3],Gn);return{c(){e=j("span"),n=V(),r&&r.c(),y(e,"class","fn__space")},m(s,a){D(s,e,a),D(s,n,a),r&&r.m(s,a),o=!0},p(s,a){r&&r.p&&(!o||a&8)&&Oe(r,i,s,s[3],o?Te(i,s[3],a,Ks):Ae(s[3]),Gn)},i(s){o||(A(r,s),o=!0)},o(s){C(r,s),o=!1},d(s){s&&(R(e),R(n)),r&&r.d(s)}}}function ea(t){let e,n,o,i,r,s,a;const c=t[4].title,h=Se(c,t,t[3],Yn),l=h||Zs(t),g=t[4].text,d=Se(g,t,t[3],Jn),p=d||Qs(t);let u=t[2]&&Xn(t),f=!t[2]&&Zn(t);return{c(){e=j("label"),n=j("div"),l&&l.c(),o=V(),i=j("div"),p&&p.c(),r=V(),u&&u.c(),s=V(),f&&f.c(),y(i,"class","b3-label__text"),y(n,"class","fn__flex-1 svelte-2m76cy"),E(n,"visible",t[2]),y(e,"class","fn__flex b3-label")},m(m,_){D(m,e,_),H(e,n),l&&l.m(n,null),H(n,o),H(n,i),p&&p.m(i,null),H(n,r),u&&u.m(n,null),H(e,s),f&&f.m(e,null),a=!0},p(m,[_]){h?h.p&&(!a||_&8)&&Oe(h,c,m,m[3],a?Te(c,m[3],_,Xs):Ae(m[3]),Yn):l&&l.p&&(!a||_&1)&&l.p(m,a?_:-1),d?d.p&&(!a||_&8)&&Oe(d,g,m,m[3],a?Te(g,m[3],_,Ys):Ae(m[3]),Jn):p&&p.p&&(!a||_&2)&&p.p(m,a?_:-1),m[2]?u?(u.p(m,_),_&4&&A(u,1)):(u=Xn(m),u.c(),A(u,1),u.m(n,null)):u&&(ft(),C(u,1,1,()=>{u=null}),ht()),(!a||_&4)&&E(n,"visible",m[2]),m[2]?f&&(ft(),C(f,1,1,()=>{f=null}),ht()):f?(f.p(m,_),_&4&&A(f,1)):(f=Zn(m),f.c(),A(f,1),f.m(e,null))},i(m){a||(A(l,m),A(p,m),A(u),A(f),a=!0)},o(m){C(l,m),C(p,m),C(u),C(f),a=!1},d(m){m&&R(e),l&&l.d(m),p&&p.d(m),u&&u.d(),f&&f.d()}}}function ta(t,e,n){let{$$slots:o={},$$scope:i}=e,{title:r=""}=e,{text:s=""}=e,{block:a=!1}=e;return t.$$set=c=>{"title"in c&&n(0,r=c.title),"text"in c&&n(1,s=c.text),"block"in c&&n(2,a=c.block),"$$scope"in c&&n(3,i=c.$$scope)},[r,s,a,i,o]}class de extends Re{constructor(e){super(),Be(this,e,ta,ea,Ce,{title:0,text:1,block:2})}}var K=(t=>(t[t.checkbox=0]="checkbox",t[t.text=1]="text",t[t.number=2]="number",t[t.slider=3]="slider",t[t.button=4]="button",t[t.select=5]="select",t[t.textarea=6]="textarea",t))(K||{});function Qn(t,e,n){const o=t.slice();return o[20]=e[n],o}function na(t){let e,n,o;return{c(){e=j("textarea"),e.disabled=t[2],y(e,"class","b3-text-field"),y(e,"placeholder",t[5]),E(e,"fn__block",t[3]),E(e,"fn__size200",!t[3]&&t[4]),ot(e,"height",t[8]>0?`${t[8]}px`:void 0),ot(e,"font-family",t[9]?t[9]:void 0)},m(i,r){D(i,e,r),Q(e,t[0]),n||(o=[$(e,"input",t[18]),$(e,"change",t[11])],n=!0)},p(i,r){r&4&&(e.disabled=i[2]),r&32&&y(e,"placeholder",i[5]),r&65&&Q(e,i[0]),r&8&&E(e,"fn__block",i[3]),r&24&&E(e,"fn__size200",!i[3]&&i[4]),r&256&&ot(e,"height",i[8]>0?`${i[8]}px`:void 0),r&512&&ot(e,"font-family",i[9]?i[9]:void 0)},d(i){i&&R(e),n=!1,Y(o)}}}function oa(t){let e,n=[],o=new Map,i,r,s=pt(t[6]);const a=c=>c[20].key;for(let c=0;c<s.length;c+=1){let h=Qn(t,s,c),l=a(h);o.set(l,n[c]=eo(l,h))}return{c(){e=j("select");for(let c=0;c<n.length;c+=1)n[c].c();e.disabled=t[2],y(e,"class","b3-select"),t[0]===void 0&&ut(()=>t[17].call(e)),E(e,"fn__block",t[3]),E(e,"fn__size200",!t[3]&&t[4]),E(e,"fn__flex-center",!t[3])},m(c,h){D(c,e,h);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null);In(e,t[0],!0),i||(r=[$(e,"change",t[17]),$(e,"change",t[11])],i=!0)},p(c,h){h&64&&(s=pt(c[6]),n=zo(n,h,a,1,c,s,o,e,qs,eo,null,Qn)),h&4&&(e.disabled=c[2]),h&65&&In(e,c[0]),h&8&&E(e,"fn__block",c[3]),h&24&&E(e,"fn__size200",!c[3]&&c[4]),h&8&&E(e,"fn__flex-center",!c[3])},d(c){c&&R(e);for(let h=0;h<n.length;h+=1)n[h].d();i=!1,Y(r)}}}function ia(t){let e,n,o,i;return{c(){e=j("button"),n=Ve(t[0]),e.disabled=t[2],y(e,"class","b3-button b3-button--outline"),E(e,"fn__block",t[3]),E(e,"fn__size200",!t[3]&&t[4]),E(e,"fn__flex-center",!t[3])},m(r,s){D(r,e,s),H(e,n),o||(i=$(e,"click",t[10]),o=!0)},p(r,s){s&1&&Fo(n,r[0]),s&4&&(e.disabled=r[2]),s&8&&E(e,"fn__block",r[3]),s&24&&E(e,"fn__size200",!r[3]&&r[4]),s&8&&E(e,"fn__flex-center",!r[3])},d(r){r&&R(e),o=!1,i()}}}function ra(t){let e,n,o,i,r,s;return{c(){e=j("input"),e.disabled=t[2],y(e,"class","b3-slider svelte-edt8og"),y(e,"type","range"),y(e,"min",n=t[7].min),y(e,"max",o=t[7].max),y(e,"step",i=t[7].step),E(e,"fn__block",t[3]),E(e,"fn__size200",!t[3]&&t[4])},m(a,c){D(a,e,c),Q(e,t[0]),r||(s=[$(e,"change",t[16]),$(e,"input",t[16]),$(e,"change",t[11])],r=!0)},p(a,c){c&4&&(e.disabled=a[2]),c&128&&n!==(n=a[7].min)&&y(e,"min",n),c&128&&o!==(o=a[7].max)&&y(e,"max",o),c&128&&i!==(i=a[7].step)&&y(e,"step",i),c&65&&Q(e,a[0]),c&8&&E(e,"fn__block",a[3]),c&24&&E(e,"fn__size200",!a[3]&&a[4])},d(a){a&&R(e),r=!1,Y(s)}}}function sa(t){let e,n,o,i,r,s;return{c(){e=j("input"),e.disabled=t[2],y(e,"class","b3-text-field"),y(e,"type","number"),y(e,"placeholder",t[5]),y(e,"min",n=t[7].min),y(e,"max",o=t[7].max),y(e,"step",i=t[7].step),E(e,"fn__block",t[3]),E(e,"fn__size200",!t[3]&&t[4]),E(e,"fn__flex-center",!t[3])},m(a,c){D(a,e,c),Q(e,t[0]),r||(s=[$(e,"input",t[15]),$(e,"change",t[11])],r=!0)},p(a,c){c&4&&(e.disabled=a[2]),c&32&&y(e,"placeholder",a[5]),c&128&&n!==(n=a[7].min)&&y(e,"min",n),c&128&&o!==(o=a[7].max)&&y(e,"max",o),c&128&&i!==(i=a[7].step)&&y(e,"step",i),c&65&&$t(e.value)!==a[0]&&Q(e,a[0]),c&8&&E(e,"fn__block",a[3]),c&24&&E(e,"fn__size200",!a[3]&&a[4]),c&8&&E(e,"fn__flex-center",!a[3])},d(a){a&&R(e),r=!1,Y(s)}}}function aa(t){let e,n,o;return{c(){e=j("input"),e.disabled=t[2],y(e,"class","b3-text-field"),y(e,"placeholder",t[5]),E(e,"fn__block",t[3]),E(e,"fn__size200",!t[3]&&t[4]),E(e,"fn__flex-center",!t[3])},m(i,r){D(i,e,r),Q(e,t[0]),n||(o=[$(e,"input",t[14]),$(e,"change",t[11])],n=!0)},p(i,r){r&4&&(e.disabled=i[2]),r&32&&y(e,"placeholder",i[5]),r&65&&e.value!==i[0]&&Q(e,i[0]),r&8&&E(e,"fn__block",i[3]),r&24&&E(e,"fn__size200",!i[3]&&i[4]),r&8&&E(e,"fn__flex-center",!i[3])},d(i){i&&R(e),n=!1,Y(o)}}}function la(t){let e,n,o;return{c(){e=j("input"),e.disabled=t[2],y(e,"class","b3-switch svelte-edt8og"),y(e,"type","checkbox"),E(e,"fn__block",t[3]),E(e,"fn__flex-center",!t[3])},m(i,r){D(i,e,r),e.checked=t[0],n||(o=[$(e,"change",t[13]),$(e,"change",t[11])],n=!0)},p(i,r){r&4&&(e.disabled=i[2]),r&65&&(e.checked=i[0]),r&8&&E(e,"fn__block",i[3]),r&8&&E(e,"fn__flex-center",!i[3])},d(i){i&&R(e),n=!1,Y(o)}}}function eo(t,e){let n,o=e[20].text+"",i,r,s,a;return{key:t,first:null,c(){n=j("option"),i=Ve(o),r=V(),n.__value=s=e[20].key,Q(n,n.__value),y(n,"title",a=e[20].title),this.first=n},m(c,h){D(c,n,h),H(n,i),H(n,r)},p(c,h){e=c,h&64&&o!==(o=e[20].text+"")&&Fo(i,o),h&64&&s!==(s=e[20].key)&&(n.__value=s,Q(n,n.__value)),h&64&&a!==(a=e[20].title)&&y(n,"title",a)},d(c){c&&R(n)}}}function ca(t){let e;function n(r,s){if(r[1]===K.checkbox)return la;if(r[1]===K.text)return aa;if(r[1]===K.number)return sa;if(r[1]===K.slider)return ra;if(r[1]===K.button)return ia;if(r[1]===K.select)return oa;if(r[1]===K.textarea)return na}let o=n(t),i=o&&o(t);return{c(){i&&i.c(),e=nn()},m(r,s){i&&i.m(r,s),D(r,e,s)},p(r,[s]){o===(o=n(r))&&i?i.p(r,s):(i&&i.d(1),i=o&&o(r),i&&(i.c(),i.m(e.parentNode,e)))},i:he,o:he,d(r){r&&R(e),i&&i.d(r)}}}function ua(t,e,n){let{type:o}=e,{settingKey:i}=e,{settingValue:r}=e,{disabled:s=!1}=e,{block:a=!1}=e,{normal:c=!0}=e,{placeholder:h=""}=e,{options:l=[]}=e,{limits:g={min:0,max:100,step:1}}=e,{height:d=0}=e,{fontFamily:p=""}=e;const u=Io();function f(k){u("clicked",{event:k})}function m(k){u("changed",{key:i,value:r,event:k})}function _(){r=this.checked,n(0,r),n(6,l)}function W(){r=this.value,n(0,r),n(6,l)}function T(){r=$t(this.value),n(0,r),n(6,l)}function O(){r=$t(this.value),n(0,r),n(6,l)}function z(){r=Ns(this),n(0,r),n(6,l)}function X(){r=this.value,n(0,r),n(6,l)}return t.$$set=k=>{"type"in k&&n(1,o=k.type),"settingKey"in k&&n(12,i=k.settingKey),"settingValue"in k&&n(0,r=k.settingValue),"disabled"in k&&n(2,s=k.disabled),"block"in k&&n(3,a=k.block),"normal"in k&&n(4,c=k.normal),"placeholder"in k&&n(5,h=k.placeholder),"options"in k&&n(6,l=k.options),"limits"in k&&n(7,g=k.limits),"height"in k&&n(8,d=k.height),"fontFamily"in k&&n(9,p=k.fontFamily)},[r,o,s,a,c,h,l,g,d,p,f,m,i,_,W,T,O,z,X]}class be extends Re{constructor(e){super(),Be(this,e,ua,ca,Ce,{type:1,settingKey:12,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8,fontFamily:9})}}function fa(t){let e,n;return e=new be({props:{slot:"input",type:K.button,settingKey:"Reset",settingValue:t[1].settings.generalSettings.reset.text}}),e.$on("clicked",t[3]),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p:he,i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function ha(t){let e,n;return e=new de({props:{title:t[1].settings.generalSettings.reset.title,text:t[1].settings.generalSettings.reset.description,$$slots:{input:[fa]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&16384&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function pa(t){let e,n;return e=new be({props:{slot:"input",type:K.checkbox,settingKey:"enable",settingValue:t[0].focus.enable}}),e.$on("changed",t[6]),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&1&&(r.settingValue=o[0].focus.enable),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function da(t){let e,n;return e=new de({props:{title:t[1].settings.focusSettings.enable.title,text:t[1].settings.focusSettings.enable.description,$$slots:{input:[pa]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&16385&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function ma(t){let e,n;return e=new be({props:{slot:"input",type:K.checkbox,settingKey:"enable",settingValue:t[0].typewriter.enable}}),e.$on("changed",t[7]),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&1&&(r.settingValue=o[0].typewriter.enable),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function ba(t){let e,n;return e=new be({props:{slot:"input",type:K.checkbox,settingKey:"code",settingValue:t[0].typewriter.code.row}}),e.$on("changed",t[8]),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&1&&(r.settingValue=o[0].typewriter.code.row),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function ga(t){let e,n;return e=new be({props:{slot:"input",type:K.checkbox,settingKey:"table",settingValue:t[0].typewriter.table.row}}),e.$on("changed",t[9]),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&1&&(r.settingValue=o[0].typewriter.table.row),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function wa(t){let e,n;return e=new be({props:{slot:"input",type:K.checkbox,settingKey:"view",settingValue:t[0].typewriter.view.row}}),e.$on("changed",t[10]),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&1&&(r.settingValue=o[0].typewriter.view.row),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function ya(t){let e,n;return e=new be({props:{slot:"input",type:K.number,settingKey:"timeout",settingValue:t[0].typewriter.timeout,limits:{min:0,max:1/0,step:25}}}),e.$on("changed",t[11]),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,i){const r={};i&1&&(r.settingValue=o[0].typewriter.timeout),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}function _a(t){let e,n,o,i,r,s,a,c,h,l;return e=new de({props:{title:t[1].settings.typewriterSettings.enable.title,text:t[1].settings.typewriterSettings.enable.description,$$slots:{input:[ma]},$$scope:{ctx:t}}}),o=new de({props:{title:t[1].settings.typewriterSettings.code.title,text:t[1].settings.typewriterSettings.code.description,$$slots:{input:[ba]},$$scope:{ctx:t}}}),r=new de({props:{title:t[1].settings.typewriterSettings.table.title,text:t[1].settings.typewriterSettings.table.description,$$slots:{input:[ga]},$$scope:{ctx:t}}}),a=new de({props:{title:t[1].settings.typewriterSettings.view.title,text:t[1].settings.typewriterSettings.view.description,$$slots:{input:[wa]},$$scope:{ctx:t}}}),h=new de({props:{title:t[1].settings.typewriterSettings.timeout.title,text:t[1].settings.typewriterSettings.timeout.description,$$slots:{input:[ya]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment),n=V(),x(o.$$.fragment),i=V(),x(r.$$.fragment),s=V(),x(a.$$.fragment),c=V(),x(h.$$.fragment)},m(g,d){F(e,g,d),D(g,n,d),F(o,g,d),D(g,i,d),F(r,g,d),D(g,s,d),F(a,g,d),D(g,c,d),F(h,g,d),l=!0},p(g,d){const p={};d&16385&&(p.$$scope={dirty:d,ctx:g}),e.$set(p);const u={};d&16385&&(u.$$scope={dirty:d,ctx:g}),o.$set(u);const f={};d&16385&&(f.$$scope={dirty:d,ctx:g}),r.$set(f);const m={};d&16385&&(m.$$scope={dirty:d,ctx:g}),a.$set(m);const _={};d&16385&&(_.$$scope={dirty:d,ctx:g}),h.$set(_)},i(g){l||(A(e.$$.fragment,g),A(o.$$.fragment,g),A(r.$$.fragment,g),A(a.$$.fragment,g),A(h.$$.fragment,g),l=!0)},o(g){C(e.$$.fragment,g),C(o.$$.fragment,g),C(r.$$.fragment,g),C(a.$$.fragment,g),C(h.$$.fragment,g),l=!1},d(g){g&&(R(n),R(i),R(s),R(c)),U(e,g),U(o,g),U(r,g),U(a,g),U(h,g)}}}function ka(t){let e,n,o,i,r,s;return e=new Lt({props:{display:t[4][0].key===t[13],$$slots:{default:[ha]},$$scope:{ctx:t}}}),o=new Lt({props:{display:t[4][1].key===t[13],$$slots:{default:[da]},$$scope:{ctx:t}}}),r=new Lt({props:{display:t[4][2].key===t[13],$$slots:{default:[_a]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment),n=V(),x(o.$$.fragment),i=V(),x(r.$$.fragment)},m(a,c){F(e,a,c),D(a,n,c),F(o,a,c),D(a,i,c),F(r,a,c),s=!0},p(a,c){const h={};c&8192&&(h.display=a[4][0].key===a[13]),c&16384&&(h.$$scope={dirty:c,ctx:a}),e.$set(h);const l={};c&8192&&(l.display=a[4][1].key===a[13]),c&16385&&(l.$$scope={dirty:c,ctx:a}),o.$set(l);const g={};c&8192&&(g.display=a[4][2].key===a[13]),c&16385&&(g.$$scope={dirty:c,ctx:a}),r.$set(g)},i(a){s||(A(e.$$.fragment,a),A(o.$$.fragment,a),A(r.$$.fragment,a),s=!0)},o(a){C(e.$$.fragment,a),C(o.$$.fragment,a),C(r.$$.fragment,a),s=!1},d(a){a&&(R(n),R(i)),U(e,a),U(o,a),U(r,a)}}}function Ea(t){let e,n;return e=new Vs({props:{panels:t[4],focus:va,$$slots:{default:[ka,({focus:o})=>({13:o}),({focus:o})=>o?8192:0]},$$scope:{ctx:t}}}),{c(){x(e.$$.fragment)},m(o,i){F(e,o,i),n=!0},p(o,[i]){const r={};i&24577&&(r.$$scope={dirty:i,ctx:o}),e.$set(r)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){U(e,o)}}}let va=0;function Sa(t,e,n){let{config:o}=e,{plugin:i}=e;const r=i.i18n;async function s(){await i.updateConfig(o)}function a(){i.siyuan.confirm(r.settings.generalSettings.reset.title,r.settings.generalSettings.reset.description,async()=>{await i.resetConfig(),globalThis.location.reload()})}const c=[{key:0,text:r.settings.generalSettings.title,name:r.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:r.settings.focusSettings.title,name:r.settings.focusSettings.title,icon:"#iconFocus"},{key:2,text:r.settings.typewriterSettings.title,name:r.settings.typewriterSettings.title,icon:"#iconKeymap"}],h=async f=>{n(0,o.focus.enable=f.detail.value,o),await s()},l=async f=>{n(0,o.typewriter.enable=f.detail.value,o),await s()},g=async f=>{n(0,o.typewriter.code.row=f.detail.value,o),await s()},d=async f=>{n(0,o.typewriter.table.row=f.detail.value,o),await s()},p=async f=>{n(0,o.typewriter.view.row=f.detail.value,o),await s()},u=async f=>{n(0,o.typewriter.timeout=f.detail.value,o),await s()};return t.$$set=f=>{"config"in f&&n(0,o=f.config),"plugin"in f&&n(5,i=f.plugin)},[o,r,s,a,c,i,h,l,g,d,p,u]}class Ta extends Re{constructor(e){super(),Be(this,e,Sa,Ea,Ce,{config:0,plugin:5})}}Oa();Na();const to=Aa();function Oa(){switch(ke.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function Aa(){switch(ke.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function Na(){switch(ke.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}var Pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ca(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gt={exports:{}};(function(t,e){(function(n,o){var i="1.0.37",r="",s="?",a="function",c="undefined",h="object",l="string",g="major",d="model",p="name",u="type",f="vendor",m="version",_="architecture",W="console",T="mobile",O="tablet",z="smarttv",X="wearable",k="embedded",J=500,G="Amazon",oe="Apple",on="ASUS",rn="BlackBerry",pe="Browser",We="Chrome",Wo="Edge",Ge="Firefox",Ke="Google",sn="Huawei",_t="LG",kt="Microsoft",an="Motorola",Je="Opera",Ye="Samsung",ln="Sharp",Xe="Sony",Et="Xiaomi",vt="Zebra",cn="Facebook",un="Chromium OS",fn="Mac OS",Go=function(N,L){var S={};for(var q in N)L[q]&&L[q].length%2===0?S[q]=L[q].concat(N[q]):S[q]=N[q];return S},Ze=function(N){for(var L={},S=0;S<N.length;S++)L[N[S].toUpperCase()]=N[S];return L},hn=function(N,L){return typeof N===l?Le(L).indexOf(Le(N))!==-1:!1},Le=function(N){return N.toLowerCase()},Ko=function(N){return typeof N===l?N.replace(/[^\d\.]/g,r).split(".")[0]:o},St=function(N,L){if(typeof N===l)return N=N.replace(/^\s\s*/,r),typeof L===c?N:N.substring(0,J)},De=function(N,L){for(var S=0,q,ue,ie,B,v,re;S<L.length&&!v;){var Ot=L[S],mn=L[S+1];for(q=ue=0;q<Ot.length&&!v&&Ot[q];)if(v=Ot[q++].exec(N),v)for(ie=0;ie<mn.length;ie++)re=v[++ue],B=mn[ie],typeof B===h&&B.length>0?B.length===2?typeof B[1]==a?this[B[0]]=B[1].call(this,re):this[B[0]]=B[1]:B.length===3?typeof B[1]===a&&!(B[1].exec&&B[1].test)?this[B[0]]=re?B[1].call(this,re,B[2]):o:this[B[0]]=re?re.replace(B[1],B[2]):o:B.length===4&&(this[B[0]]=re?B[3].call(this,re.replace(B[1],B[2])):o):this[B]=re||o;S+=2}},Tt=function(N,L){for(var S in L)if(typeof L[S]===h&&L[S].length>0){for(var q=0;q<L[S].length;q++)if(hn(L[S][q],N))return S===s?o:S}else if(hn(L[S],N))return S===s?o:S;return N},Jo={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},pn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},dn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,m],[/opios[\/ ]+([\w\.]+)/i],[m,[p,Je+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[p,Je]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[p,"UC"+pe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[p,"Smart Lenovo "+pe]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+pe],m],[/\bfocus\/([\w\.]+)/i],[m,[p,Ge+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[p,Je+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[p,Je+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[p,"MIUI "+pe]],[/fxios\/([-\w\.]+)/i],[m,[p,Ge]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+pe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+pe],m],[/samsungbrowser\/([\w\.]+)/i],[m,[p,Ye+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,cn],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[p,We+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,We+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[p,"Android "+pe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[m,Tt,Jo]],[/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[p,Ge+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[p,m],[/(cobalt)\/([\w\.]+)/i],[p,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,Le]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,r,Le]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,Le]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,Ye],[u,O]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[f,Ye],[u,T]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[f,oe],[u,T]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[f,oe],[u,O]],[/(macintosh);/i],[d,[f,oe]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[f,ln],[u,T]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[f,sn],[u,O]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[f,sn],[u,T]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[f,Et],[u,T]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[f,Et],[u,O]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[f,"OPPO"],[u,T]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[u,T]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[f,"Realme"],[u,T]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[f,an],[u,T]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[f,an],[u,O]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,_t],[u,O]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[f,_t],[u,T]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[f,"Lenovo"],[u,O]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[u,T]],[/(pixel c)\b/i],[d,[f,Ke],[u,O]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[f,Ke],[u,T]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[f,Xe],[u,T]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[f,Xe],[u,O]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[f,"OnePlus"],[u,T]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[f,G],[u,O]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,G],[u,T]],[/(playbook);[-\w\),; ]+(rim)/i],[d,f,[u,O]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[f,rn],[u,T]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[f,on],[u,O]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[f,on],[u,T]],[/(nexus 9)/i],[d,[f,"HTC"],[u,O]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[d,/_/g," "],[u,T]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[f,"Acer"],[u,O]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[f,"Meizu"],[u,T]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[f,"Ulefone"],[u,T]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,d,[u,T]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,d,[u,O]],[/(surface duo)/i],[d,[f,kt],[u,O]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[f,"Fairphone"],[u,T]],[/(u304aa)/i],[d,[f,"AT&T"],[u,T]],[/\bsie-(\w*)/i],[d,[f,"Siemens"],[u,T]],[/\b(rct\w+) b/i],[d,[f,"RCA"],[u,O]],[/\b(venue[\d ]{2,7}) b/i],[d,[f,"Dell"],[u,O]],[/\b(q(?:mv|ta)\w+) b/i],[d,[f,"Verizon"],[u,O]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[f,"Barnes & Noble"],[u,O]],[/\b(tm\d{3}\w+) b/i],[d,[f,"NuVision"],[u,O]],[/\b(k88) b/i],[d,[f,"ZTE"],[u,O]],[/\b(nx\d{3}j) b/i],[d,[f,"ZTE"],[u,T]],[/\b(gen\d{3}) b.+49h/i],[d,[f,"Swiss"],[u,T]],[/\b(zur\d{3}) b/i],[d,[f,"Swiss"],[u,O]],[/\b((zeki)?tb.*\b) b/i],[d,[f,"Zeki"],[u,O]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],d,[u,O]],[/\b(ns-?\w{0,9}) b/i],[d,[f,"Insignia"],[u,O]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[f,"NextBook"],[u,O]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[u,T]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],d,[u,T]],[/\b(ph-1) /i],[d,[f,"Essential"],[u,T]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[f,"Envizen"],[u,O]],[/\b(trio[-\w\. ]+) b/i],[d,[f,"MachSpeed"],[u,O]],[/\btu_(1491) b/i],[d,[f,"Rotor"],[u,O]],[/(shield[\w ]+) b/i],[d,[f,"Nvidia"],[u,O]],[/(sprint) (\w+)/i],[f,d,[u,T]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[f,kt],[u,T]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[f,vt],[u,O]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[f,vt],[u,T]],[/smart-tv.+(samsung)/i],[f,[u,z]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[f,Ye],[u,z]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,_t],[u,z]],[/(apple) ?tv/i],[f,[d,oe+" TV"],[u,z]],[/crkey/i],[[d,We+"cast"],[f,Ke],[u,z]],[/droid.+aft(\w+)( bui|\))/i],[d,[f,G],[u,z]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[f,ln],[u,z]],[/(bravia[\w ]+)( bui|\))/i],[d,[f,Xe],[u,z]],[/(mitv-\w{5}) bui/i],[d,[f,Et],[u,z]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[u,z]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,St],[d,St],[u,z]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,z]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[u,W]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[u,W]],[/(playstation [345portablevi]+)/i],[d,[f,Xe],[u,W]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[f,kt],[u,W]],[/((pebble))app/i],[f,d,[u,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[f,oe],[u,X]],[/droid.+; (glass) \d/i],[d,[f,Ke],[u,X]],[/droid.+; (wt63?0{2,3})\)/i],[d,[f,vt],[u,X]],[/(quest( 2| pro)?)/i],[d,[f,cn],[u,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[u,k]],[/(aeobc)\b/i],[d,[f,G],[u,k]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[u,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[u,O]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,O]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,T]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[p,Wo+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[m,Tt,pn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,Tt,pn],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,fn],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,m],[/\(bb(10);/i],[m,[p,rn]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[p,Ge+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[p,We+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,un],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,m],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,m]]},ee=function(N,L){if(typeof N===h&&(L=N,N=o),!(this instanceof ee))return new ee(N,L).getResult();var S=typeof n!==c&&n.navigator?n.navigator:o,q=N||(S&&S.userAgent?S.userAgent:r),ue=S&&S.userAgentData?S.userAgentData:o,ie=L?Go(dn,L):dn,B=S&&S.userAgent==q;return this.getBrowser=function(){var v={};return v[p]=o,v[m]=o,De.call(v,q,ie.browser),v[g]=Ko(v[m]),B&&S&&S.brave&&typeof S.brave.isBrave==a&&(v[p]="Brave"),v},this.getCPU=function(){var v={};return v[_]=o,De.call(v,q,ie.cpu),v},this.getDevice=function(){var v={};return v[f]=o,v[d]=o,v[u]=o,De.call(v,q,ie.device),B&&!v[u]&&ue&&ue.mobile&&(v[u]=T),B&&v[d]=="Macintosh"&&S&&typeof S.standalone!==c&&S.maxTouchPoints&&S.maxTouchPoints>2&&(v[d]="iPad",v[u]=O),v},this.getEngine=function(){var v={};return v[p]=o,v[m]=o,De.call(v,q,ie.engine),v},this.getOS=function(){var v={};return v[p]=o,v[m]=o,De.call(v,q,ie.os),B&&!v[p]&&ue&&ue.platform!="Unknown"&&(v[p]=ue.platform.replace(/chrome os/i,un).replace(/macos/i,fn)),v},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return q},this.setUA=function(v){return q=typeof v===l&&v.length>J?St(v,J):v,this},this.setUA(q),this};ee.VERSION=i,ee.BROWSER=Ze([p,m,g]),ee.CPU=Ze([_]),ee.DEVICE=Ze([d,f,u,W,T,z,O,X,k]),ee.ENGINE=ee.OS=Ze([p,m]),t.exports&&(e=t.exports=ee),e.UAParser=ee;var ge=typeof n!==c&&(n.jQuery||n.Zepto);if(ge&&!ge.ua){var Qe=new ee;ge.ua=Qe.getResult(),ge.ua.get=function(){return Qe.getUA()},ge.ua.set=function(N){Qe.setUA(N);var L=Qe.getResult();for(var S in L)ge.ua[S]=L[S]}}})(typeof window=="object"?window:Pa)})(Gt,Gt.exports);var Ba=Gt.exports;const Ra=new Ba.UAParser,no=Ra.getResult();class La{constructor(e,n=!0){M(this,"FLAG_FIREFOX");this.label=e,this.collapsed=n,this.FLAG_FIREFOX=no.browser.name==="Firefox"||no.engine.name==="Gecko"}stdout(e,n,...o){const i=this.FLAG_FIREFOX?`[${this.label}] - <${e.name.toUpperCase()}>`:`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(i):globalThis.console.group(i),n)for(const r of o)Array.isArray(r)?e(...r):e(r);else e(...o);globalThis.console.trace(),globalThis.console.groupEnd()}clear(...e){this.stdout(globalThis.console.clear,!1,...e)}countReset(...e){this.stdout(globalThis.console.countReset,!1,...e)}count(...e){this.stdout(globalThis.console.count,!1,...e)}counts(...e){this.stdout(globalThis.console.count,!0,...e)}assert(...e){this.stdout(globalThis.console.assert,!1,...e)}asserts(...e){this.stdout(globalThis.console.assert,!0,...e)}dir(...e){this.stdout(globalThis.console.dir,!1,...e)}dirs(...e){this.stdout(globalThis.console.dir,!0,...e)}dirxml(...e){this.stdout(globalThis.console.dirxml,!1,...e)}dirxmls(...e){this.stdout(globalThis.console.dirxml,!0,...e)}table(...e){this.stdout(globalThis.console.table,!1,...e)}tables(...e){this.stdout(globalThis.console.table,!0,...e)}debug(...e){this.stdout(globalThis.console.debug,!1,...e)}debugs(...e){this.stdout(globalThis.console.debug,!0,...e)}info(...e){this.stdout(globalThis.console.info,!1,...e)}infos(...e){this.stdout(globalThis.console.info,!0,...e)}log(...e){this.stdout(globalThis.console.log,!1,...e)}logs(...e){this.stdout(globalThis.console.log,!0,...e)}warn(...e){this.stdout(globalThis.console.warn,!1,...e)}warns(...e){this.stdout(globalThis.console.warn,!0,...e)}error(...e){this.stdout(globalThis.console.error,!1,...e)}errors(...e){this.stdout(globalThis.console.error,!0,...e)}}var Da=function(e){return qa(e)&&!Ma(e)};function qa(t){return!!t&&typeof t=="object"}function Ma(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Ua(t)}var ja=typeof Symbol=="function"&&Symbol.for,Fa=ja?Symbol.for("react.element"):60103;function Ua(t){return t.$$typeof===Fa}function Ia(t){return Array.isArray(t)?[]:{}}function ze(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Ne(Ia(t),t,e):t}function xa(t,e,n){return t.concat(e).map(function(o){return ze(o,n)})}function za(t,e){if(!e.customMerge)return Ne;var n=e.customMerge(t);return typeof n=="function"?n:Ne}function Ha(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function oo(t){return Object.keys(t).concat(Ha(t))}function $o(t,e){try{return e in t}catch{return!1}}function $a(t,e){return $o(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Va(t,e,n){var o={};return n.isMergeableObject(t)&&oo(t).forEach(function(i){o[i]=ze(t[i],n)}),oo(e).forEach(function(i){$a(t,i)||($o(t,i)&&n.isMergeableObject(e[i])?o[i]=za(i,n)(t[i],e[i],n):o[i]=ze(e[i],n))}),o}function Ne(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||xa,n.isMergeableObject=n.isMergeableObject||Da,n.cloneUnlessOtherwiseSpecified=ze;var o=Array.isArray(e),i=Array.isArray(t),r=o===i;return r?o?n.arrayMerge(t,e,n):Va(t,e,n):ze(e,n)}Ne.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(o,i){return Ne(o,i,n)},{})};var Wa=Ne,Ga=Wa;const Ka=Ca(Ga);function io(...t){return Ka.all(t,{arrayMerge:(e,n,o)=>n})}function Ja(t=globalThis.siyuan){var n,o,i;const e=[];if((n=t==null?void 0:t.mobile)!=null&&n.editor&&e.push(t.mobile.editor),(o=t==null?void 0:t.layout)!=null&&o.centerLayout){const r=[];for(r.push(t.layout.centerLayout);r.length>0;){const s=r.pop();if(s.children.length>0)for(let a of s.children)(i=a.model)!=null&&i.editor?e.push(a.model.editor):a.children&&r.push(a)}}return e}function Ya(t=globalThis.siyuan){const e=[];for(const n of t.blockPanels)for(const o of n.editors)e.push(o);return e}function Xa(t=globalThis.siyuan){return[...Ja(t),...Ya(t)]}function ro(t,e=100){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{t.apply(this,o)},e)}}function Za(t){return!!(t&&t instanceof HTMLElement&&t.dataset.type&&t.dataset.nodeId&&Wt.id.test(t.dataset.nodeId))}function Qa(t){return!!(t&&t instanceof HTMLElement&&t.classList.contains("protyle-wysiwyg"))}const el=Qa;function tl(t){return!!(t&&t instanceof HTMLElement&&t.classList.contains("protyle-content"))}function nl(){const t=document.getSelection();for(var e=t==null?void 0:t.focusNode;e&&(!(e instanceof HTMLElement)||!Za(e));)e=e.parentElement;return e}function Vo(){for(var t=globalThis.document.activeElement;t&&(!(t instanceof HTMLElement)||!el(t));)t=t.parentElement;return t}function ol(){const t=Vo();return tl(t==null?void 0:t.parentElement)?t==null?void 0:t.parentElement:void 0}function il(t=(e=>(e=globalThis.document.getSelection())==null?void 0:e.focusNode)()){for(;t&&(!(t instanceof HTMLElement)||!t.classList.contains("hljs"));)t=t.parentElement;return t}function rl(){const t=globalThis.document.getSelection();if((t==null?void 0:t.rangeCount)===1){const e=t.getRangeAt(0),n=il(e.commonAncestorContainer);if(n){const o=n.textContent??"",i=globalThis.document.createRange(),r=globalThis.document.createRange(),s=globalThis.document.createRange(),a=globalThis.document.createRange(),{anchorNode:c,anchorOffset:h,focusNode:l,focusOffset:g}=t;if(c&&l&&n.firstChild&&n.lastChild){const d=c===l?h<=g:!!(c.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING);i.setStartBefore(n.firstChild),r.setEndAfter(n.lastChild),s.setStartBefore(n.firstChild),a.setEndAfter(n.lastChild),d?(i.setEnd(c,h),r.setStart(l,g)):(i.setEnd(l,g),r.setStart(c,h)),s.setEnd(l,g),a.setStart(l,g);const p=s.toString(),u=p.split(`
`),f=u.at(-1),m=u.length,_=f.length,W=p.length;return{code:o,row:m,column:_,offset:W,container:n,selection:t,order:d,before:i,current:e,after:r,prefix:s,suffix:a}}}}}const Dt={typewriter:{enable:!0,timeout:250,code:{row:!0},table:{row:!0},view:{row:!0}},focus:{enable:!0}},te={FOCUS_ELEMENT_UNIQUE_ID:"plugin-focus-unique-id",FOCUS_ELEMENT_ATTR_NAME:"data-plugin-focus",FOCUS_ELEMENT_DATA_NAME:"pluginFocus"},Ue=class Ue extends ke.Plugin{constructor(n){super(n);M(this,"siyuan",ke);M(this,"logger");M(this,"client");M(this,"SETTINGS_DIALOG_ID");M(this,"protyles",new WeakSet);M(this,"focus",new WeakMap);M(this,"config",Dt);M(this,"scrollIntoView");M(this,"scrollBy");M(this,"currentElement");M(this,"topBarButton");M(this,"toggleEnableState",()=>{this.config.typewriter.enable=!this.config.typewriter.enable,this.activate()});M(this,"loadedProtyleStaticEventListener",n=>{if(this.enable){const o=n.detail.protyle;this.toggleEventListener(o,!0)}});M(this,"destroyProtyleEventListener",n=>{const o=n.detail.protyle;this.toggleEventListener(o,!1)});M(this,"clickEditorContentEventListener",n=>{if(this.enable){const o=n.detail.event;this.editorEventListener(o)}});M(this,"editorEventListener",async n=>{var i,r,s;const o=nl();if(this.config.focus.enable){const a=Vo();if(o&&a){let c=o;switch(o.dataset.type){case"NodeTable":{c=o;break}case"NodeAttributeView":{c=o.querySelector(".av__cell--select")??o;break}default:c=o;break}const h=globalThis.document.getElementById(te.FOCUS_ELEMENT_UNIQUE_ID);h?c!==h&&(h==null||h.removeAttribute("id"),c.id=te.FOCUS_ELEMENT_UNIQUE_ID):c.id=te.FOCUS_ELEMENT_UNIQUE_ID;const l=this.focus.get(a);c!==l&&(l==null||delete l.dataset[te.FOCUS_ELEMENT_DATA_NAME],c.dataset[te.FOCUS_ELEMENT_DATA_NAME]=String(!0),this.focus.set(a,c))}else(i=globalThis.document.getElementById(te.FOCUS_ELEMENT_UNIQUE_ID))==null||i.removeAttribute("id"),(r=this.focus.get(a))==null||delete r.dataset[te.FOCUS_ELEMENT_DATA_NAME]}if(this.config.typewriter.enable&&o){let a=o;switch(o.dataset.type){case"NodeCodeBlock":if(o.classList.contains("render-node"))break;if(this.config.typewriter.code.row){const c=ol();if(c){const h=globalThis.getSelection(),l=h==null?void 0:h.focusNode,g=rl();if(l&&g){const{height:d,bottom:p}=c.getBoundingClientRect(),u=parseFloat(globalThis.getComputedStyle(g.container).getPropertyValue("line-height")),f=g.container.getBoundingClientRect().top+u*g.row;this.scrollBy(c,{top:-(p-d/2-(f-u/2)),left:0,behavior:"smooth"})}}return}break;case"NodeTable":if(this.config.typewriter.view.row){let c=(s=globalThis.getSelection())==null?void 0:s.focusNode;for(;c;){if(c instanceof HTMLElement&&(c.localName==="td"||c.localName==="th"))break;c=c.parentElement}a=c??o}break;case"NodeAttributeView":this.config.typewriter.table.row&&(a=o.querySelector(".av__cell--select")??o);break}if(this.currentElement===a)return;this.currentElement=a,this.scrollIntoView(a)}});this.logger=new La(this.name),this.client=new Ss(void 0,"fetch"),this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`,this.updateScrollFunction()}onload(){this.addCommand({langKey:"toggle-typewriter",langText:this.i18n.menu.switch.command.text,hotkey:"T",customHotkey:"T",callback:this.toggleEnableState}),this.loadData(Ue.GLOBAL_CONFIG_NAME).then(n=>{this.config=io(Dt,n||{}),this.updateScrollFunction()}).catch(n=>this.logger.error(n)).finally(()=>{this.activate()})}onLayoutReady(){this.topBarButton=this.addTopBar({icon:"iconKeymap",title:this.i18n.menu.switch.title,position:"right",callback:this.toggleEnableState}),this.updateTopBarButtonState()}onunload(){this.activate(!1)}openSetting(){const n=this,i=new ke.Dialog({title:`${this.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${n.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:to?"92vw":"720px",height:to?void 0:"640px"}).element.querySelector(`#${n.SETTINGS_DIALOG_ID}`);i&&new Ta({target:i,props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(io(Dt))}async updateConfig(n){return n&&n!==this.config&&(this.config=n),this.activate(),this.updateScrollFunction(),this.saveData(Ue.GLOBAL_CONFIG_NAME,this.config)}get enable(){return this.config.typewriter.enable||this.config.focus.enable}toggleEventListener(n,o){var r,s,a,c;const i=["keyup",this.editorEventListener,{capture:!0}];switch(!0){case(o&&!this.protyles.has(n)):this.protyles.add(n),(s=(r=n.wysiwyg)==null?void 0:r.element)==null||s.addEventListener(...i);break;case(!o&&this.protyles.has(n)):this.protyles.delete(n),(c=(a=n.wysiwyg)==null?void 0:a.element)==null||c.removeEventListener(...i);break}}activate(n=this.enable){var i;const o=Xa();for(const r of o){const s=r==null?void 0:r.protyle;s&&this.toggleEventListener(s,n)}this.updateTopBarButtonState(),this.config.focus.enable||((i=globalThis.document.getElementById(te.FOCUS_ELEMENT_UNIQUE_ID))==null||i.removeAttribute("id"),globalThis.document.querySelectorAll(`[${te.FOCUS_ELEMENT_ATTR_NAME}]`).forEach(r=>{r instanceof HTMLElement?delete r.dataset[te.FOCUS_ELEMENT_DATA_NAME]:r.removeAttribute(te.FOCUS_ELEMENT_ATTR_NAME)})),n?(this.eventBus.on("loaded-protyle-static",this.loadedProtyleStaticEventListener),this.eventBus.on("destroy-protyle",this.destroyProtyleEventListener),this.eventBus.on("click-editorcontent",this.clickEditorContentEventListener)):(this.eventBus.off("loaded-protyle-static",this.loadedProtyleStaticEventListener),this.eventBus.off("destroy-protyle",this.destroyProtyleEventListener),this.eventBus.off("click-editorcontent",this.clickEditorContentEventListener))}updateTopBarButtonState(){if(this.topBarButton){const n=this.config.typewriter.enable;this.topBarButton.ariaLabel=n?this.i18n.menu.switch.enabled:this.i18n.menu.switch.disabled,this.topBarButton.classList.toggle("toolbar__item--active",n)}}updateScrollFunction(n=this.config.typewriter.timeout){this.scrollIntoView=ro(o=>{o.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})},n),this.scrollBy=ro((o,i)=>{o.scrollBy(i)},n)}};M(Ue,"GLOBAL_CONFIG_NAME","global-config");let Kt=Ue;module.exports=Kt;
